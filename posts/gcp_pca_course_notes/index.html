<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta name="google-adsense-account" content="ca-pub-6504473922193740">
        <title>Cloud architect GCP üöß - Ich bin yiwen.</title><meta name="Description" content="An ordinary space for storing and groups pieces of articles."><meta property="og:url" content="http://wysiwyz.github.io/posts/gcp_pca_course_notes/">
  <meta property="og:site_name" content="Ich bin yiwen.">
  <meta property="og:title" content="Cloud architect GCP üöß">
  <meta property="og:description" content="Active learning - think and take notes
Review - every once in a while
Section 01 Getting Started GCP has 200&#43; services. This exam expects knowledge of 40&#43; services
Exam tests your decision making abilities:
Which service do you choose in which situation?
How do you trade-off between resilience, performance and cost while not compromising on security and operational excellence?
Below notes will help with making the tough choices">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-03-24T13:39:15+08:00">
    <meta property="article:modified_time" content="2023-03-24T13:39:15+08:00">
    <meta property="article:tag" content="Google_cloud">
    <meta property="article:tag" content="CA">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Cloud architect GCP üöß">
  <meta name="twitter:description" content="Active learning - think and take notes
Review - every once in a while
Section 01 Getting Started GCP has 200&#43; services. This exam expects knowledge of 40&#43; services
Exam tests your decision making abilities:
Which service do you choose in which situation?
How do you trade-off between resilience, performance and cost while not compromising on security and operational excellence?
Below notes will help with making the tough choices">
<meta name="application-name" content="Ich bin yiwen.">
<meta name="apple-mobile-web-app-title" content="Ich bin yiwen."><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/moon_icon.svg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://wysiwyz.github.io/posts/gcp_pca_course_notes/" /><link rel="prev" href="http://wysiwyz.github.io/posts/lesson_03_linux/" /><link rel="next" href="http://wysiwyz.github.io/posts/suzume_no_tojimari/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Cloud architect GCP üöß",
        "inLanguage": "en-us",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/wysiwyz.github.io\/posts\/gcp_pca_course_notes\/"
        },"genre": "posts","keywords": "google_cloud, CA","wordcount":  12380 ,
        "url": "http:\/\/wysiwyz.github.io\/posts\/gcp_pca_course_notes\/","datePublished": "2023-03-24T13:39:15+08:00","dateModified": "2023-03-24T13:39:15+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "celine"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Ich bin yiwen.">Ich bin yiwen.</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Ich bin yiwen.">Ich bin yiwen.</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Cloud architect GCP üöß</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>celine</a></span>&nbsp;<span class="post-category">included in <a href="/categories/studynote/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>StudyNote</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-03-24">2023-03-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;12380 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;59 minutes&nbsp;<span id="/posts/gcp_pca_course_notes/" class="leancloud_visitors" data-flag-title="Cloud architect GCP üöß">
                        <i class="far fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;views
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#getting-started">Getting Started</a></li>
        <li><a href="#before-the-cloud">Before the Cloud</a></li>
        <li><a href="#challenges">Challenges</a></li>
        <li><a href="#silver-lining-in-the-cloud">Silver Lining in the Cloud</a></li>
        <li><a href="#cloud-advantages">Cloud advantages</a></li>
        <li><a href="#google-cloud-platform">Google Cloud Platform</a></li>
        <li><a href="#best-path-to-learn-gcp">Best path to learn GCP</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#regions-and-zones">Regions and Zones</a></li>
        <li><a href="#multiple-data-centers">Multiple data centers</a></li>
        <li><a href="#multiple-regions">Multiple regions</a></li>
        <li><a href="#regions">Regions</a></li>
        <li><a href="#zones">Zones</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#google-comput-engine---gce">Google Comput Engine - GCE</a></li>
        <li><a href="#compute-engine---features">Compute Engine - Features</a></li>
        <li><a href="#compute-engine-hands-on">Compute Engine Hands-on</a></li>
        <li><a href="#compute-engine-machine-family">Compute Engine Machine Family</a></li>
        <li><a href="#compute-engine-machine-types">Compute Engine Machine Types</a></li>
        <li><a href="#image">Image</a></li>
        <li><a href="#compute-engine-hands-on--setting-up-a-http-server">Compute Engine Hands-on : Setting up a HTTP server</a></li>
        <li><a href="#internal-and-external-ip-addresses">Internal and External IP Addresses</a></li>
        <li><a href="#static-ip-addresses">Static IP Addresses</a></li>
        <li><a href="#static-ip-addresses---remember">Static IP addresses - Remember</a></li>
        <li><a href="#simplify-vm-http-server-setup">Simplify VM HTTP server setup</a></li>
        <li><a href="#bootstrapping-with-startup-script">Bootstrapping with Startup script</a></li>
        <li><a href="#instance-templates">Instance templates</a></li>
        <li><a href="#reducing-launch-time-with-custom-image">Reducing Launch Time with Custom Image</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#cloud-storage">Cloud Storage</a></li>
        <li><a href="#objects-and-buckets">Objects and Buckets</a></li>
        <li><a href="#storage-class---introduction">Storage Class - Introduction</a></li>
        <li><a href="#storage-classes---comparision">Storage Classes - Comparision</a></li>
        <li><a href="#features-across-storage-classes">Features across Storage Classes</a></li>
        <li><a href="#ÔΩèbject-versioning">ÔºØbject Versioning</a></li>
        <li><a href="#object-lifecycle-management">Object Lifecycle Management</a></li>
        <li><a href="#encription">Encription</a></li>
        <li><a href="#unstanding-cloud-storage-metadata">Unstanding Cloud Storage Metadata</a></li>
        <li><a href="#cloud-storage-bucket-lock---meet-compliance-needs">Cloud Storage Bucket Lock - Meet Compliance Needs</a></li>
        <li><a href="#transferring-data-from-on-premises-to-cloud">Transferring data from on premises to cloud</a></li>
        <li><a href="#migrating-data-with-transfer-appliance">Migrating Data with Transfer Appliance</a></li>
        <li><a href="#understanding-cloud-storage-best-practices">Understanding Cloud Storage Best Practices</a></li>
        <li><a href="#cloud-storage---command-line">Cloud Storage - command line</a></li>
        <li><a href="#scenarios">Scenarios</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#cloud-debugger">Cloud Debugger</a></li>
        <li><a href="#cloud-proflier">Cloud Proflier</a></li>
        <li><a href="#error-reporting">Error Reporting</a></li>
        <li><a href="#cloud-logging-monitoring----stackdriver">Cloud Logging, Monitoring .. - Stackdriver</a></li>
        <li><a href="#cloud-operations-scenarios">Cloud Operations Scenarios</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#heading"></a></li>
        <li><a href="#resource-hierarchy---recommendations-for-enterprises">Resource Hierarchy - Recommendations for Enterprises</a></li>
        <li><a href="#billing-accounts">Billing Accounts</a></li>
        <li><a href="#managing-billing---budget-alerts-and-exports">Managing Billing - Budget, Alerts and Exports</a></li>
        <li><a href="#iam-best-practices">IAM Best Practices</a></li>
        <li><a href="#user-identity-management-in-google-cloud">User Identity Management in Google Cloud</a></li>
        <li><a href="#corporate-directory-federation">Corporate Directory Federation</a></li>
        <li><a href="#iam-membersidentities">IAM Members/Identities</a></li>
        <li><a href="#iam-membersidentities---use-cases">IAM Members/Identities - Use Cases</a></li>
        <li><a href="#organization-policy-service">Organization Policy Service</a></li>
        <li><a href="#resource-hierarchy--iam-policy">Resource Hierarchy &amp; IAM Policy</a></li>
        <li><a href="#cloud-bigquery-roles">Cloud BigQuery Roles</a></li>
        <li><a href="#corporate-directory-federation-1">Corporate Directory Federation</a></li>
        <li><a href="#iam---scenarios">IAM - Scenarios</a></li>
        <li><a href="#ÔΩéeed-for-asynchronous-communication">ÔºÆeed for Asynchronous Communication</a></li>
        <li><a href="#asynchronous-communication---decoupled">Asynchronous Communication - Decoupled</a></li>
        <li><a href="#pubsub">Pub/Sub</a></li>
        <li><a href="#pubsub---how-does-it-work">Pub/Sub - How does it work?</a></li>
        <li><a href="#pubsub---getting-ready-with-topic-and-subscriptions">Pub/Sub - Getting ready with Topic and Subscriptions</a></li>
        <li><a href="#pubsub---sending-and-receiving-a-message">Pub/Sub - Sending and Receiving a message</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#cloud-vpn">Cloud VPN</a></li>
        <li><a href="#cloud-vpn---vpn-gateway-peer-gateway-and-cloud-router">Cloud VPN - VPN Gateway, peer gateway and cloud router</a></li>
        <li><a href="#cloud-interconnect">Cloud Interconnect</a></li>
        <li><a href="#hybrid-connectivity---remember">Hybrid Connectivity - Remember</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#bigquery---datawarehouse">BigQuery - Datawarehouse</a></li>
        <li><a href="#bigquery---accessing-and-querying-data">BigQuery - Accessing and Querying Data</a></li>
        <li><a href="#partitioning-and-clustering-bigquery-tables---use-case">Partitioning and Clustering BigQuery Tables - Use Case</a></li>
        <li><a href="#partitioning-and-clustering-bigquery-tables">Partitioning and Clustering BigQuery Tables</a></li>
        <li><a href="#partitioning-and-clustering-bigquery-tables---syntax">Partitioning and Clustering BigQuery Tables - Syntax</a></li>
        <li><a href="#expiring-data-in-bigquery">Expiring Data in BigQuery</a></li>
        <li><a href="#importing-data-into-bigquery">Importing Data into BigQuery</a></li>
        <li><a href="#streaming-data-into-bigquery">Streaming Data into BigQuery</a></li>
        <li><a href="#understanding-bigquery-best-practices">Understanding BigQuery Best Practices</a></li>
        <li><a href="#cloud-dataproc">Cloud Dataproc</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#data-lifecycle">Data Lifecycle</a></li>
        <li><a href="#data-lifecycle---1---ingest">Data Lifecycle - 1 - Ingest</a></li>
        <li><a href="#data-lifecycle---2---store">Data Lifecycle - 2 - Store</a></li>
        <li><a href="#data-lifecycle---3---process-and-analysis">Data Lifecycle - 3 - Process and analysis</a></li>
        <li><a href="#data-lifecycle---4---explore-and-visualize">Data Lifecycle - 4 - Explore and visualize</a></li>
        <li><a href="#big-data-and-analytics-in-gcp">Big Data and Analytics in GCP</a></li>
        <li><a href="#heading-1">&hellip;</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#architect-understand-business-requirements">Architect: Understand Business Requirements</a></li>
        <li><a href="#total-cost-of-ownership">Total Cost of Ownership</a></li>
        <li><a href="#defining-technical-requirements">Defining Technical Requirements</a></li>
        <li><a href="#planning-for-high-availability">Planning for High Availability</a></li>
        <li><a href="#planning-for-scalability">Planning for Scalability</a></li>
        <li><a href="#planning-for-scalability---2">Planning for Scalability - 2</a></li>
        <li><a href="#planning-for-security-p-stylecolor-yellowciap">Planning for Security <!-- raw HTML omitted -->CIA<!-- raw HTML omitted --></a></li>
        <li><a href="#implementing-ddos-protection-and-mitigation">Implementing DDoS Protection and Mitigation</a></li>
        <li><a href="#digital-signatures---cloud-kms">Digital Signatures - Cloud KMS</a></li>
        <li><a href="#cloud-armor">Cloud Armor</a></li>
        <li><a href="#secret-manager">Secret Manager</a></li>
        <li><a href="#architect-responsibilities-stakeholder-management">Architect Responsibilities: Stakeholder Management</a></li>
        <li><a href="#architect-responsibilities-change-management">Architect Responsibilities: Change Management</a></li>
        <li><a href="#architect-responsibilities-business-continuity-planning">Architect Responsibilities: Business Continuity Planning</a></li>
        <li><a href="#architect-responsibilities-incident-management">Architect Responsibilities: Incident Management</a></li>
        <li><a href="#architect-responsibilities-data-management">Architect Responsibilities: Data Management</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#cloud-scheduler">Cloud Scheduler</a></li>
        <li><a href="#cloud-emulators">Cloud Emulators</a></li>
        <li><a href="#cloud-dns">Cloud DNS</a></li>
        <li><a href="#cloud-dns---cli">Cloud DNS - CLI</a></li>
        <li><a href="#pricing-calculator">Pricing Calculator</a></li>
        <li><a href="#anthos">Anthos</a></li>
        <li><a href="#machine-learning-in-google-cloud">Machine Learning in Google Cloud</a></li>
        <li><a href="#rest-api-challenges">REST API Challenges</a></li>
        <li><a href="#apigee-api-management">Apigee API Management</a></li>
        <li><a href="#getting-started-with-identity-platform">Getting Started with Identity Platform</a></li>
        <li><a href="#cloud-iam-vs-identity-platform---scenarios">Cloud IAM vs Identity Platform - Scenarios</a></li>
        <li><a href="#getting-started-with-event-driven-architecture">Getting Started with Event Driven Architecture</a></li>
        <li><a href="#getting-started-with-cloudevents">Getting Started with CloudEvents</a></li>
        <li><a href="#getting-started-with-observability-and-opentelemetry">Getting Started with Observability and OpenTelemetry</a></li>
        <li><a href="#using-service-directory">Using Service Directory</a></li>
        <li><a href="#using-service-directory---features">Using Service Directory - Features</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#google-cloud-architecture-framework">Google Cloud Architecture Framework</a></li>
        <li><a href="#principle-1-operational-excellence">Principle 1: Operational Excellence</a></li>
        <li><a href="#operational-excellence---best-practices">Operational Excellence - Best practices</a></li>
        <li><a href="#operational-excellence---best-practices---2">Operational Excellence - Best practices - 2</a></li>
        <li><a href="#operational-excellence---best-practices---3">Operational Excellence - Best practices - 3</a></li>
        <li><a href="#principle-2-security-privacy-and-compliance">Principle 2: Security, Privacy and Compliance</a></li>
        <li><a href="#security-privacy-and-compliance---best-practices">Security, Privacy and Compliance - Best practices</a></li>
        <li><a href="#security-privacy-and-compliance---best-practices---2">Security, Privacy and Compliance - Best practices - 2</a></li>
        <li><a href="#security-privacy-and-compliance---best-practices---3">Security, Privacy and Compliance - Best practices - 3</a></li>
        <li><a href="#principle-3-reliability">Principle 3: Reliability</a></li>
        <li><a href="#reliability---best-practices">Reliability - Best practices</a></li>
        <li><a href="#reliability---best-practice---2">Reliability - Best practice - 2</a></li>
        <li><a href="#performance-and-cost-optimization---best-practices---2">Performance and Cost Optimization - Best practices - 2</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#case-studies---important">Case Studies - <em>Important</em></a></li>
        <li><a href="#1-ehr-healthcare">1. EHR Healthcare</a></li>
        <li><a href="#requirements">Requirements</a></li>
        <li><a href="#2-helicopter-racing">2. Helicopter Racing</a></li>
        <li><a href="#requirements-1">Requirements</a></li>
        <li><a href="#discussion">Discussion</a></li>
        <li><a href="#3-mountkirk-games">3. Mountkirk Games</a></li>
        <li><a href="#requirements-2">Requirements</a></li>
        <li><a href="#discussion-1">Discussion</a></li>
        <li><a href="#requirements-3">Requirements</a></li>
        <li><a href="#discussion-2">Discussion</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#gca-resources">GCA Resources</a></li>
        <li><a href="#certification-exam">Certification Exam</a></li>
        <li><a href="#google-cloud-api">Google Cloud API</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><blockquote>
<p><em>Active learning</em> - think and take notes</p>
<p><em>Review</em> - every once in a while</p>
</blockquote>
<h1 id="section-01">Section 01</h1>
<h3 id="getting-started">Getting Started</h3>
<ul>
<li>
<p>GCP has 200+ services. This exam expects knowledge of 40+ services</p>
</li>
<li>
<p>Exam tests your <strong>decision making abilities</strong>:</p>
<ul>
<li>
<p>Which service do you choose in which situation?</p>
</li>
<li>
<p>How do you trade-off between resilience, performance and cost while not compromising on security and operational excellence?</p>
<blockquote>
<p>Below notes will help with making the tough choices</p>
<p>And Enable you to architect amazing solutions in GCP</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="before-the-cloud">Before the Cloud</h3>
<ul>
<li>
<p>Example 1: Online shopping app</p>
<ul>
<li>Challenge:
<ul>
<li>Peak usage during holidays and weekends</li>
<li>Less load during rest of the time</li>
</ul>
</li>
<li>Solution (before the Cloud)
<ul>
<li>PEAK LOAD provisioning : Procure (buy) infrastructure for peak load</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Example 2 - Startup</p>
<ul>
<li>Challenge:
<ul>
<li>Startup suddenly becomes popular</li>
<li>How do you handle the sudden increase in load?</li>
</ul>
</li>
<li>Solution (before the cloud)
<ul>
<li>Procure infrastructure assuming they would be successful</li>
</ul>
</li>
</ul>
<h3 id="challenges">Challenges</h3>
<ul>
<li>
<p>High cost of procuring infrastructure</p>
</li>
<li>
<p>Needs ahead of time planning (Can you guess the future?)</p>
</li>
<li>
<p>Low infrastructure utilization (PEAK LOAD provisioning)</p>
</li>
<li>
<p>Dedicated infrastructure maintenance team (Can a startup afford it?)</p>
</li>
</ul>
</li>
</ul>
<h3 id="silver-lining-in-the-cloud">Silver Lining in the Cloud</h3>
<ul>
<li>Rent resources when you want htem, and release them back when they are not needed
<ul>
<li>AKA on-demand resource provisioning</li>
<li>AKA elasticity</li>
</ul>
</li>
</ul>
<h3 id="cloud-advantages">Cloud advantages</h3>
<ul>
<li>Trade <strong>capital expense</strong> for <strong>variable expense</strong></li>
<li>Benefit from massive <strong>economies of scale</strong></li>
<li>Stop <strong>guessing</strong> capacity</li>
<li>Stop spending money running and maintaining data centers</li>
<li><strong>Go global</strong> in minutes</li>
</ul>
<h3 id="google-cloud-platform">Google Cloud Platform</h3>
<ul>
<li>One of the Top 3 cloud service providers</li>
<li>200+ services provided</li>
<li>Reliable, secure and highly performant:
<ul>
<li>Infrastructure that powers 8 services with over 1 billion users: Gmail, Google Search, YouTube</li>
</ul>
</li>
<li>Cleanest cloud
<ul>
<li>Net carbon-neutral cloud (electricity used matched 100% with renewable energy)</li>
</ul>
</li>
</ul>
<h3 id="best-path-to-learn-gcp">Best path to learn GCP</h3>
<ul>
<li>Cloud applications make use of multiple GCP services</li>
</ul>
<h1 id="section-02">Section 02</h1>
<h3 id="regions-and-zones">Regions and Zones</h3>
<ul>
<li>Imagine that your application is deployed in a data center in Londonw</li>
<li>possible challenges?
<ol>
<li>slow access from other parts of the word (<strong>high latency</strong>)</li>
<li>what if the data center crashes? (Low availability)</li>
</ol>
</li>
</ul>
<h3 id="multiple-data-centers">Multiple data centers</h3>
<ul>
<li>Add one more data center in London</li>
<li>Possible challenges
<ol>
<li>Xxx</li>
<li>Yyy</li>
<li>Zzz</li>
</ol>
</li>
</ul>
<h3 id="multiple-regions">Multiple regions</h3>
<ul>
<li>
<p>add a new region: Changhua</p>
</li>
<li>
<p>Possible challenges:</p>
<ol>
<li>
<p>(partly solved) slow access for users from other parts of the world</p>
<p>-&gt; Cloud provider to the resecue</p>
</li>
<li>
<p>(solved) what if one data center crashed</p>
</li>
<li>
<p>(Solved) what if entire region of London is unavailable?</p>
</li>
</ol>
</li>
</ul>
<h3 id="regions">Regions</h3>
<ul>
<li>Google provides 20+ regions around the world</li>
<li>Region: Specific geographical location to hose your resources</li>
<li>Advantages:
<ul>
<li>High availability</li>
<li>Low Latency</li>
<li>Global Footprint</li>
<li>Adhere to government regulations</li>
</ul>
</li>
</ul>
<h3 id="zones">Zones</h3>
<ul>
<li>How to achieve high availability in the same region (or )</li>
<li>Each Region has three or more zones</li>
<li>(Advantage) Increased availability and fault tolerance within same region</li>
</ul>
<h1 id="section-03">Section 03</h1>
<h3 id="google-comput-engine---gce">Google Comput Engine - GCE</h3>
<ul>
<li>In corporate data centers, applications are deployed to physical server</li>
<li>In the cloud, you rent virtual servers nad deploy applications</li>
<li><strong>Virtual Machines</strong> - Virtual servers in GCP</li>
<li><strong>Google Compute Engine (GCE)</strong> - Provision and Manage Virtual Machines</li>
</ul>
<h3 id="compute-engine---features">Compute Engine - Features</h3>
<ul>
<li>Create and manage lifecycle of Virtual Machine (VM) instances</li>
<li><strong>Load balancing</strong> and <strong>auto scaling</strong> for multiple VM instances</li>
<li><strong>Attach storage</strong> (&amp; network storage) to your VM instances</li>
<li>Manage <strong>network connectivity and configuration</strong> for your VM instances</li>
<li>Goal:
<ul>
<li>Setup VM instances as HTTP(Web) Server</li>
<li>Distribute load with Load Balancers</li>
</ul>
</li>
</ul>
<h3 id="compute-engine-hands-on">Compute Engine Hands-on</h3>
<ul>
<li>Let&rsquo;s create a few VM instances and play with them</li>
<li>Let&rsquo;s check out the lifecycle of VM instances</li>
<li>Let&rsquo;s use SSH to connect to VM instances</li>
</ul>
<h3 id="compute-engine-machine-family">Compute Engine Machine Family</h3>
<blockquote>
<p>Machine family, machine type</p>
</blockquote>
<ul>
<li>
<p>What type of hardware do you want to run your workloads on?</p>
</li>
<li>
<p>Different Machine Families for different workloads:</p>
<ul>
<li>
<p><strong>General purpose (E2, N2, N2D, N1)</strong>:</p>
<p>Best price-performance ratio</p>
<ul>
<li>Web and application servers, Small-medium databases, Dev environments</li>
</ul>
</li>
<li>
<p><strong>Memory Optimized (M2, M1)</strong>:</p>
<p>Ultra high memory workloads</p>
<ul>
<li>Large in-memory databases and In-memory analytics</li>
</ul>
</li>
<li>
<p><strong>Compute Optimized (C2)</strong>:</p>
<p>Compute intensive workloads</p>
<ul>
<li>Gaming applications</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="compute-engine-machine-types">Compute Engine Machine Types</h3>
<table>
<thead>
<tr>
<th>Machine name</th>
<th>vCPUs *</th>
<th>Memory(GB) *</th>
<th>Max number of persistent disks(PDs)</th>
<th>Max total PD size(TB)</th>
<th>Local SSD</th>
<th>Maximum egress bandwidth (Gbps) *</th>
</tr>
</thead>
<tbody>
<tr>
<td>e2-standard-2</td>
<td>2</td>
<td>8</td>
<td>128</td>
<td>257</td>
<td>No</td>
<td>4</td>
</tr>
<tr>
<td>e2-standard-4</td>
<td>4</td>
<td>16</td>
<td>128</td>
<td>257</td>
<td>No</td>
<td>8</td>
</tr>
<tr>
<td>e2-standard-8</td>
<td>6</td>
<td>32</td>
<td>128</td>
<td>257</td>
<td>No</td>
<td>16</td>
</tr>
<tr>
<td>e2-standard-16</td>
<td>16</td>
<td>64</td>
<td>128</td>
<td>257</td>
<td>No</td>
<td>16</td>
</tr>
<tr>
<td>e2-standard-32</td>
<td>32</td>
<td>128</td>
<td>128</td>
<td>257</td>
<td>No</td>
<td>16</td>
</tr>
</tbody>
</table>
<ul>
<li>How much CPU, memory or disk do you want?
<ul>
<li>Variety of machine types are available for each machine family</li>
<li>Let&rsquo;s take an example: <strong>e2-standard-2</strong>
<ul>
<li><strong>e2</strong> : Machine Type Family</li>
<li><strong>standard</strong> : Type of workload</li>
<li><strong>2</strong> : number of CPUs</li>
</ul>
</li>
</ul>
</li>
<li>*Memory, disk and networking capabilities increase along with vCPUs</li>
</ul>
<h3 id="image">Image</h3>
<ul>
<li>What operating system and what software do you want on the instance?</li>
<li>Type of images:
<ul>
<li>Public Images: Provided and maintained by Google or Open source communities or third</li>
</ul>
</li>
</ul>
<h3 id="compute-engine-hands-on--setting-up-a-http-server">Compute Engine Hands-on : Setting up a HTTP server</h3>
<pre tabindex="0"><code class="language-terminal" data-lang="terminal">#! /bin/bash
sudo su
apt update
apt -y install apache2
sudo service apache2 start
sudo update-rc.d apache2 enable
echo &#34;Hello World&#34; &gt; /var/www/html/index.html
echo &#34;Hello world from $(hostname) $(hostname -i)&#34; &gt; /var/www/html/index.html
</code></pre><h3 id="internal-and-external-ip-addresses">Internal and External IP Addresses</h3>
<ul>
<li>External (Public) IP addresses are Internet addressable</li>
<li>Internal (Private) IP addresses are internal to a corporate network</li>
<li>You CANNOT have two resources with the same public (External) IP address
<ul>
<li>However, two different corporate networks CAN have resources with the same Internal (private) IP address</li>
</ul>
</li>
<li>All <strong>VM instances</strong> are assigned at least one internal IP address</li>
<li>Creation of External IP addresses can be enabled for VM instances</li>
<li>DEMO: VM instances - &hellip;</li>
</ul>
<h3 id="static-ip-addresses">Static IP Addresses</h3>
<ul>
<li>Scenario : How do you get a constant External IP address for a VM instance?
<ul>
<li>Quick and dirty way is to assign an Static IP address to the VM</li>
</ul>
</li>
<li><strong>DEMO</strong> : Using Static IP Address with an VM instance</li>
</ul>
<h3 id="static-ip-addresses---remember">Static IP addresses - Remember</h3>
<ul>
<li>Static IP <strong>can be switched</strong> to another VM instance in the same project</li>
<li>Static IP <strong>remains attached</strong> even if you stop the instance. You have to manually detach it</li>
<li><em>Remember</em> : You are <strong>billed for</strong> an Static IP when you are <strong>NOT using it</strong> as well
<ul>
<li>Make sure that you explicitly release an Static IP when you are not using it</li>
</ul>
</li>
</ul>
<blockquote>
<p>if you are not using a static IP not, it&rsquo;s best that you immediately release it. Or else the billing would be very high.</p>
</blockquote>
<pre tabindex="0"><code class="language-terminal" data-lang="terminal">#!/bin/bash
apt update
apt -y install apache2
echo &#34;Hello world from $(hostname) $(hostname -i)&#34; &gt; /var/www/html/index.html
</code></pre><h3 id="simplify-vm-http-server-setup">Simplify VM HTTP server setup</h3>
<ul>
<li>How do we <strong>reduce</strong> the <strong>number of steps</strong> in creating an VM instance and setting up a HTTP Server?</li>
<li>Let&rsquo;s explore a few options:
<ul>
<li><strong>Startup script</strong></li>
<li>Instance Template</li>
<li>Custom Image</li>
</ul>
</li>
</ul>
<h3 id="bootstrapping-with-startup-script">Bootstrapping with Startup script</h3>
<ul>
<li><strong>Bootstrapping</strong>: install OS patches or software when an VM instance is launched</li>
<li>In VM, you can configure <strong>Startup script</strong> to bootstrap</li>
</ul>
<h3 id="instance-templates">Instance templates</h3>
<ul>
<li>Why do you need to specify all the VM instance details (image, instance type etc) every time you launch an instance?
<ul>
<li>How about creating a instance template?</li>
<li>Define <strong>machine type</strong>, <strong>image</strong>, <strong>labels</strong>, <strong>startup script</strong> and other properties</li>
</ul>
</li>
<li>Used to create <strong>VM instances</strong> and <strong>managed instance groups</strong>
<ul>
<li>Provides a <strong>convenient way</strong> to create similar instances</li>
</ul>
</li>
<li><strong>CANNOT</strong> be updated
<ul>
<li>To make a change, copy an existing template and modify it</li>
</ul>
</li>
<li>(Optional) Image family can be specified (example - debian-9):</li>
</ul>
<h3 id="reducing-launch-time-with-custom-image">Reducing Launch Time with Custom Image</h3>
<ul>
<li>Installing OS patches and software at launch of VM instances increase boot up time</li>
<li>How about creating a custom image with OS patches and software <strong>pre-installed</strong>?
<ul>
<li>Can be created from an instance, a persistent disk, a snapshot, another image, or a file in Cloud Storage</li>
<li>Can be shared across projects</li>
<li>(Recommendation) Deprecate old images (&amp; specify replacement image)</li>
<li>(Recommendation) Hardening an image - Customize images to your corporate security standards</li>
</ul>
</li>
<li><strong>Prefer</strong> using <strong>Custom Image</strong> to <strong>Startup script</strong></li>
</ul>
<h1 id="section-04">Section 04</h1>
<h4 id="step00">Step00</h4>
<h4 id="step02---create-managed-instance-groups-mig-v2">Step02 - create managed instance groups (MIG) V2</h4>
<h5 id="instance-groups">Instance Groups</h5>
<ul>
<li>How do you create a group of VM instances?
<ul>
<li>Instance Group - Group of VM instances managed as a single entity
<ul>
<li>Manage group of similar VMs having similar lifecycle as ONE UNIT</li>
</ul>
</li>
</ul>
</li>
<li>Two Types of Instance Groups:
<ul>
<li>Managed: Identical VMs created using a template:
<ul>
<li>Features: Auto scaling, auto healing and managed releases</li>
</ul>
</li>
<li>Unmanaged: Different configuration for VMs in same group:
<ul>
<li>Does NOT offer auto scaling, auto healing and other services</li>
<li>NOT Recommended unless you need different kinds of VMs</li>
</ul>
</li>
</ul>
</li>
<li>Location can be Zonal or Regional
<ul>
<li>Regional gives you higher availability (RECOMMENDED)</li>
</ul>
</li>
</ul>
<h5 id="managed-instance-groups-mig">Managed Instance Groups (MIG)</h5>
<ul>
<li>Managed Instance Group
<ul>
<li>Identical VMs created using an instance template</li>
</ul>
</li>
<li>Important Features
<ul>
<li>Maintain certain number of instances
<ul>
<li>If an instance crashes, MIG launches another instance</li>
</ul>
</li>
<li>Detect application failures using health checks (Self Healing)</li>
<li>Increase and decrease instances based on load (Auto Scaling)</li>
<li>Add <strong>Load Balancer</strong> to distribute load</li>
<li>Create instances in multiple zones (regional MIGs)
<ul>
<li>Regional MIGs provide higher availability compared to zonal MIGs</li>
</ul>
</li>
<li>Release new application versions without downtime
<ul>
<li>Rolling updates: Release new version step by step (gradually). Update a percentage of instances to the new version at a time</li>
<li>Canary Deployment: Test new version with a group of instances before releasing it across all instances.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="creating-mig-managed-instance-group">Creating MIG (managed instance group)</h5>
<ul>
<li>Instance template is mandatory</li>
<li>Configure auto-scaling to automatically adjust number of instances based on load:
<ul>
<li>Minimum number of instances</li>
<li>Maximum number of instances</li>
<li>Autoscaling metrics: CPU Utilization target or Load Balancer Utilization target, or Any other metric from Stack Driver
<ul>
<li>Cool-down period
<ul>
<li>How long to wait before looking at auto scaling metrics again?</li>
<li>Scale In Controls: Prevent a sudden drop in no of VM instances
<ul>
<li>Example: Don&rsquo;t scale in by more than 10% or 3 instances in 5 minutes</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Autohealing: Configure a heath check with initial delay (How long should you wait for your app to intialize before runing a health check?)</li>
</ul>
</li>
</ul>
<h4 id="step-04---updating-a-managed-instance-group">Step 04 - Updating a Managed Instance Group</h4>
<ul>
<li>Rolling update - Gradual update of instances in an instance group to the new instance template
<ul>
<li>Specify new template:
<ul>
<li>(Optional) Specify a template for canary testing</li>
</ul>
</li>
<li>Specify how you want the update to be down
<ul>
<li>When should the update happen?
<ul>
<li>Start the update immediately (Proactive) or when instance group is resized later(Opportunistic)</li>
</ul>
</li>
<li>How should the update happen?
<ul>
<li>Maximum surge: How many instances are added at any point in time?</li>
<li>Maximum unavailable: How many instances can be offline during the update?</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Rolling Restart/replace: Gradual restart or replace of all instances in the group
<ul>
<li>No change in template BUT replace/restart existing VMs</li>
<li>Configure Maximum surge, Maximum unavailable and What you want to do? (Restart/Replace)</li>
</ul>
</li>
</ul>
<h4 id="step-05-getting-started-with-cloud-load-balancing">Step 05: Getting started with cloud load balancing</h4>
<h5 id="cloud-load-balancing">Cloud load balancing</h5>
<ul>
<li>Distributes user traffic across instances of any application in single region or multiple regions
<ul>
<li>Fully distributed, software defined managed service</li>
<li>Important Features:
<ul>
<li>Health check - Route to healthy instances
<ul>
<li>Recover from failures</li>
</ul>
</li>
<li>Auto Scaling</li>
<li>Global load balancing with single anycast IP
<ul>
<li>Also supports internal load balancing</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Enables
<ul>
<li>High Availability</li>
<li>Auto Scaling</li>
<li>Resiliency</li>
</ul>
</li>
</ul>
<hr>
<h4 id="step-06-understanding-http-https-udp-and-tcp-protocols">Step 06: Understanding HTTP, HTTPS, UDP and TCP protocols</h4>
<pre tabindex="0"><code>[Application Layer_layer 7]  --&gt; HTTP HTTPS SMTP

[Transport Layer_layer4] --&gt; TCP TLS UDP

[Network Layer_layer3] --&gt; IP
</code></pre><h5 id="http-vs-https-vs-tcp-vs-tls-vs-udp">HTTP vs HTTPS vs TCP vs TLS vs UDP</h5>
<ul>
<li>
<p>Computers use protocols to communicate</p>
</li>
<li>
<p>Multiple layers and multiple protocols</p>
</li>
<li>
<p><strong>Network Layer</strong> - Transfer bits and bytes</p>
</li>
<li>
<p><strong>Transport Layer</strong> - Are the bits and bytes transferred properly?</p>
</li>
<li>
<p><strong>Application Layer</strong> - Make REST API calls and Send Emails</p>
</li>
<li>
<p>(Remember) Each layer makes use of the layers beneath it</p>
</li>
<li>
<p>(Remember) Most applications talk at application layer. BUT some applications talk at network layer directly</p>
</li>
<li>
<p>Network Layer:</p>
<ul>
<li>IP (internet protocol): Transfer bytes. Unreliable.</li>
</ul>
</li>
<li>
<p>Transport Layer:</p>
<ul>
<li>TCP(Transmission Control): Reliability &gt; Performance</li>
<li>TLS (Transport Layer Security): Secure TCP</li>
<li>UDP (User Datagram Protocol): Performance &gt; Reliability</li>
</ul>
</li>
<li>
<p>Application Layer:</p>
<ul>
<li>HTTP(Hypertext Transfer Protocol): Stateless Request Response Cycle</li>
<li>HTTPS: Secure HTTP</li>
<li>SMTP: Email Transfer Protocol</li>
<li>and a lot of others&hellip;</li>
</ul>
</li>
<li>
<p>Most applications typically communicate at application layer</p>
</li>
<li>
<p>HOWEVER applications needing high performance directly communicate at transport layer:</p>
<ul>
<li>Gaming applications and live video streaming use UDP (sacrifice reliability for performance)</li>
</ul>
</li>
<li>
<p>Objective: Understand Big Picture. Its OK if you do not understand all details.</p>
</li>
</ul>
<h5 id="cloud-load-balancing---terminology">Cloud Load Balancing - Terminology</h5>
<ul>
<li>Backend - Group of endpoints that receive traffic from a Google Cloud load balancer (example: instance groups)</li>
<li>Frontend - Specify an IP address, port and protocol. This IP address is the frontend IP for your clients requests.
<ul>
<li>For SSL, a certificate must also be assigned.</li>
</ul>
</li>
<li>Host and path rules (For HTTP(S) Load Balancing) - Define rules redirecting the traffic to difference backends:
<ul>
<li>Based on path</li>
<li>Based on Host</li>
<li>Based on HTTP headers (Authorization header) and methods</li>
</ul>
</li>
<li>Client to Load Balancer: Over internet
<ul>
<li>HTTPS recommended</li>
</ul>
</li>
<li>Load Balancer to VM instance: Through Google internal network
<ul>
<li>HTTP is ok. HTTPS is preferred</li>
</ul>
</li>
<li>SSL/TLS Termination/Offloading
<ul>
<li>Client to Load Balancer: HTTPS/TLS</li>
<li>Load Balancer to VM instance: HTTP/TCP</li>
</ul>
</li>
</ul>
<h5 id="cloud-load-balancing---features">Cloud Load Balancing - Features</h5>
<table>
<thead>
<tr>
<th>Load Balancer</th>
<th>Type of Traffic</th>
<th>Proxy or pass-through</th>
<th>Destination Ports</th>
</tr>
</thead>
<tbody>
<tr>
<td>External HTTP(S)</td>
<td>Global, External, HTTP or HTTPS</td>
<td>Proxy</td>
<td>HTTP on 80 or 8080<!-- raw HTML omitted -->HTTPS on 443</td>
</tr>
<tr>
<td>Internal HTTP(S)</td>
<td>Regional, Internal, HTTP or HTTPS</td>
<td>Proxy</td>
<td>HTTP on 80 or 8080<!-- raw HTML omitted -->HTTPS on 443</td>
</tr>
<tr>
<td>SSL Proxy</td>
<td>Global, External, TCP with SSL offload</td>
<td>Proxy</td>
<td>A big list</td>
</tr>
<tr>
<td>TCP Proxy</td>
<td>Global, External, TCP without SSL offload</td>
<td>Proxy</td>
<td>A big list</td>
</tr>
<tr>
<td>External Network TCP/UDP</td>
<td>Regional, External, TCP or UDP</td>
<td>pass-through</td>
<td>any</td>
</tr>
<tr>
<td>Internal TCP/UDP</td>
<td>Regional, Internal, TCP or UDP</td>
<td>pass-through</td>
<td>any</td>
</tr>
</tbody>
</table>
<h5 id="load-balancing-across-migs-in-multiple-regions">Load Balancing Across MIGs in Multiple Regions</h5>
<ul>
<li>Regional MIG can distribute instances in different zones of a single region
<ul>
<li>Create multiple Regional MIGs in different regions (in the same project)</li>
</ul>
</li>
<li>HTTP(S) Load Balancing can distribute load to the multiple MIGs behind a single external IP address
<ul>
<li>User requests are redirected to the nearest region (Low latency)</li>
</ul>
</li>
<li>Load balancing sends traffic to healthy instances:
<ul>
<li>If health check fails instances are restarted:
<ul>
<li>(REMEMBER) Ensure that health check from load balancer can reach the instances in an instance group (Firewall rules)</li>
</ul>
</li>
<li>If all backends within a region are unhealthy, traffic is distributed to healthy backends in other regions</li>
<li>Can contain preemptible instances(ÂÖàÂç†ËôõÊì¨Ê©üÂô®) as well</li>
</ul>
</li>
</ul>
<h5 id="quck-review-of-https-load-balancing-concepts">Quck Review of HTTP(S) Load Balancing Concepts</h5>
<ul>
<li>Backend Service - Group of backends or a bucket</li>
<li>Backend - A managed instance group</li>
<li>URL Maps - Route requests to backend services or backend buckets
<ul>
<li>URL/service-a maps to Backend Service A</li>
<li>URL/service-b maps to Backend Service B</li>
</ul>
</li>
<li>(Remember) Each Backend Service can have multiple backends in multiple regions</li>
</ul>
<h5 id="https-load-balancing---1---multi-regional-microservice">HTTP(S) Load Balancing - 1 - Multi Regional Microservice</h5>
<ul>
<li>Backend Services
<ul>
<li>One Backend Service for the Microservice</li>
</ul>
</li>
<li>Backends
<ul>
<li>Multiple backends for each microservice MIG in each region</li>
</ul>
</li>
<li>URL Maps
<ul>
<li>URL/service-a maps to the microservice Backend Service</li>
</ul>
</li>
<li>Global routing: Route user to nearest instance (nearest regional MIG)
<ul>
<li>Needs Networking Premium Tier
<ul>
<li>As in STANDARD Tier:
<ul>
<li>Forwarding rule and its external IP address are regional</li>
<li>All backends for a backend service must be in the same region as the forwarding rule</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Backend Service:
<ul>
<li>One Backend Service for each the Microservice</li>
</ul>
</li>
<li>Backends:
<ul>
<li>Each microservice can have multiple backend MIGs in different regions</li>
<li>In the example, we see one backend per microservice</li>
</ul>
</li>
<li>URL Maps:
<ul>
<li>URL / service-a -&gt; Microservice A Backend Service</li>
<li>URL /service-b -&gt; Microservice B Backend Service</li>
</ul>
</li>
<li>Backend Services
<ul>
<li>A Backend Service for each Microservice version</li>
</ul>
</li>
<li>Backends
<ul>
<li>Each microervice version can have multiple backend MIG in different regions
<ul>
<li>In the example, we see one backend per microservice version</li>
</ul>
</li>
</ul>
</li>
<li>URL Maps
<ul>
<li>/service-a/v1 -&gt; Microservice A V1 Backend Service</li>
<li>/service-a/v2 -&gt; Microservice A V2 Backend Service</li>
<li>/service-b -&gt; Microservice B Backend Service</li>
</ul>
</li>
<li>Flexible Architecture: With HTTP(S) load balancing, route global requests across multiple versions of multiple microservices!</li>
</ul>
<h1 id="section-05">Section 05</h1>
<h1 id="section-06">Section 06</h1>
<h1 id="section-07">Section 07</h1>
<h1 id="section-08">Section 08</h1>
<h1 id="section-09">Section 09</h1>
<h1 id="section-10-google-cloud-functions">Section 10 Google Cloud Functions</h1>
<h1 id="section-11">Section 11</h1>
<h1 id="section-12">Section 12</h1>
<h1 id="section-13">Section 13</h1>
<h1 id="section-14">Section 14</h1>
<h1 id="section-15">Section 15</h1>
<blockquote>
<p>Exploring Object Storage in Google Cloud Platform - Cloud Storage</p>
</blockquote>
<h3 id="cloud-storage">Cloud Storage</h3>
<ul>
<li>
<p>Most popular, very flexible &amp; inexpensive storage service</p>
<ul>
<li>Serverless: Autoscaling and infinite scale</li>
</ul>
</li>
<li>
<p>Store large objects using a <strong>key-value</strong> approach:</p>
<ul>
<li>Treats entire object as a unit (Partial updates not allowed)
<ul>
<li>Recommended when you operate on entire object most of the time</li>
<li>Access Control at Object level</li>
</ul>
</li>
<li>Also called <strong>Object Storage</strong></li>
</ul>
</li>
<li>
<p>Provides REST API to access and modify objects</p>
<ul>
<li>
<p>Also provides CLI (gsutil) &amp; Client Libraries (C++, C#, Java, Node.js, PHP, Python &amp; Ruby)</p>
<blockquote>
<p><code>gsutil</code>, not <code>gcloud</code></p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>Stores all file types - text, binary, backup &amp; archives</p>
<ul>
<li>Media files and archives, Application packages and logs</li>
<li>Backups of your databases</li>
<li>Staging data during on-premise to cloud database migration</li>
</ul>
</li>
</ul>
<h3 id="objects-and-buckets">Objects and Buckets</h3>
<ul>
<li>Objects are stored in buckets
<ul>
<li>Bucket names are <strong>globally unique</strong></li>
<li>Bucket names are used as part of object URLs
<ul>
<li>Naming rule: Âè™ËÉΩÊúâÂ∞èÂØ´Â≠óÊØç„ÄÅÊï∏Â≠ó„ÄÅ-„ÄÅ_„ÄÅ. (hyphen, underscore, period)</li>
</ul>
</li>
<li>3 ~ 63 characters max. Can&rsquo;t start with <strong>goog</strong> prefix or should not contain <strong>google</strong> (even misspelled)</li>
<li>Unlimited objects in a bucket</li>
<li>Each bucket is associated with a project</li>
<li>Each object is identified by an <strong>unique key</strong>
<ul>
<li>Key is unique in a bucket</li>
</ul>
</li>
<li>Max object size is <strong>5 TB</strong> (single object)
<ul>
<li>but you can store unlimited number of such objects</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="storage-class---introduction">Storage Class - Introduction</h3>
<ul>
<li>Different kinds of data can be store in Cloud Storage
<ul>
<li>Media files, archives</li>
<li>App packages and logs</li>
<li>Backups of your databases or storage devices</li>
<li>Long term archives</li>
</ul>
</li>
<li>Huge variation in <strong>access patterns</strong></li>
<li>If accessed less frequently, can the storaged object be paid at a cheaper price?
<ul>
<li><strong>Storage classes</strong> help to optimize your costs based on your access needs
<ul>
<li>Design for durability of 99.999999999% (11 9&rsquo;s)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="storage-classes---comparision">Storage Classes - Comparision</h3>
<table>
<thead>
<tr>
<th>Storage Class</th>
<th>Name</th>
<th>Min storage duration</th>
<th>Typical monthly availability</th>
<th>Use case</th>
</tr>
</thead>
<tbody>
<tr>
<td>Standard</td>
<td>STANDARD</td>
<td>None</td>
<td>Multi/dual region: &gt; 99.99%<!-- raw HTML omitted -->Regions: 99.99%</td>
<td>Frequently used data</td>
</tr>
<tr>
<td>Nearline storage</td>
<td>NEARLINE</td>
<td>30 days</td>
<td>Multi/dual region: 99.95%<!-- raw HTML omitted -->Regions: 99.99%</td>
<td>Read or modify once a month on average</td>
</tr>
<tr>
<td>Coldline storage</td>
<td>COLDLINE</td>
<td>90 days</td>
<td>Multi/dual region: 99.95%<!-- raw HTML omitted -->Regions: 99.99%</td>
<td>Read or modify at most  once a quarter</td>
</tr>
<tr>
<td>Archive storage</td>
<td>ARCHIVE</td>
<td>365 days</td>
<td>Multi/dual region: 99.95%<!-- raw HTML omitted -->Regions: 99.99%</td>
<td>Less less once a year</td>
</tr>
</tbody>
</table>
<h3 id="features-across-storage-classes">Features across Storage Classes</h3>
<ul>
<li>High durability (99.999999999% annual durability)</li>
<li>Low latency (first byte typically in tens of milliseconds)</li>
<li>Unlimited storage
<ul>
<li>Autoscaling (No configuration needed)</li>
<li>NO minimum object size</li>
</ul>
</li>
<li>Same APIs across storage classes</li>
<li><strong>Committed SLA</strong> is 99.95% for multi region and
99.9% for single region for Standard, Nearline, Coldline storage classes
<ul>
<li>No committed SLA for archive storage</li>
</ul>
</li>
</ul>
<blockquote>
<p>Committed SLA ÊúçÂãôÁ≠âÁ¥öÂçîÂÆö/ÊúçÂãôÁ¥öÂà•ÂçîÂÆö</p>
</blockquote>
<h3 id="ÔΩèbject-versioning">ÔºØbject Versioning</h3>
<ul>
<li>Prevents <strong>accidental deletion</strong> and provides history
<ul>
<li>Enabled at bucket level
<ul>
<li>Can be turned on/off at any time</li>
</ul>
</li>
<li>Live version is the latest version
<ul>
<li>If you delete live object, it becomes noncurrent object version</li>
<li>If you delete noncurrent object version,</li>
</ul>
</li>
<li>Older versions are uniquely identified by (obejct key + a generation number)</li>
<li></li>
</ul>
</li>
</ul>
<h3 id="object-lifecycle-management">Object Lifecycle Management</h3>
<ul>
<li>Files are frequently accessed when they are created
<ul>
<li>Generally <strong>usage reduces with time</strong></li>
<li>How do you save costs by <strong>moving files automatically between storage classes</strong>?
<ul>
<li>Solution: Object Lifecycle Management</li>
</ul>
</li>
</ul>
</li>
<li>Identify objects using conditions based on:
<ul>
<li>Age, CreatedBefore, IsLive, MatchesStorageClass, NumberOfNewerVersions etc</li>
<li>Set multiple conditions: all conditions must be satisfied for action to happen</li>
</ul>
</li>
<li>Two kinds of actions:
<ul>
<li><strong>SetStorageClass</strong> actions (change from one storage class to another)</li>
<li><strong>Deletion</strong> actions (delete objects)</li>
</ul>
</li>
<li>Allowed Transitions:
<ul>
<li>(Standard or Multi-Regional or Regional) to (Nearline or Coldline or Archive)</li>
<li>Nearline to (Coldline or Archive)</li>
<li>Coldline to Archive</li>
</ul>
</li>
</ul>
<h3 id="encription">Encription</h3>
<ul>
<li>(Default) Cloud storage encrypts data on the server side.</li>
<li><strong>Server-side</strong> encryption: Performed by GCS after it receives data
<ol>
<li>Google-managed - default (No configuration needed)</li>
<li>Customer-managed - keys managed by customer in <strong>Cloud KMS</strong>
<ul>
<li>GCS service account should have access to customer-managed keys in KMS to be able to encrypt and decrypt files</li>
</ul>
</li>
<li>Customer-supplied - customer supplies the keys with every GCS operation
<ul>
<li>Cloud storage does NOT store the key</li>
<li>Customer is responsible for storing and using it when making API calls
<ul>
<li>Use API headers when making API calls
<ul>
<li>x-goog-encrytion-algorithm,
x-goog-encryption-key (Base64 encryption key),
x-goog-encryption-key-sha256 (encryption key hash)</li>
</ul>
</li>
<li>OR when using gsutil: In both configuration file, configure encryption_key under GSUtil section</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li>(Optional) <strong>Client-side</strong> encryption - encryption performed by customer before upload
<ul>
<li>GCP does NOT know about the keys used</li>
<li>GCP is NOT involved in encryption or decryption</li>
</ul>
</li>
</ul>
<h3 id="unstanding-cloud-storage-metadata">Unstanding Cloud Storage Metadata</h3>
<ul>
<li>Each object in Cloud Storage can have <strong>Metadata</strong> associated with it
<ul>
<li>Key value pairs ex: <code>storageClass:STANDARD</code></li>
<li><strong>Fixed-key metadata</strong>: Fixed key - Changing value
<ul>
<li><code>Cache-Control: public, max-age=3600</code>
(Is caching allowed? If so, for how long?)</li>
<li><code>Content-Disposition: attachment; filename=&quot;myfile.pdf&quot;</code>
(Should content be displayed inline in the browser or should it be an attachment, which can be downloaded)</li>
<li><code>Content-Type: application/pdf</code>
(What kind of content does this object have?)</li>
<li>etc&hellip;</li>
</ul>
</li>
<li><strong>Custom metadata</strong>: You can define your own keys and values</li>
<li><strong>Non-editable metadata</strong>: You cannot edit these directly
<ul>
<li>Storage class of the object, customer-managed encryption keys etc.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="cloud-storage-bucket-lock---meet-compliance-needs">Cloud Storage Bucket Lock - Meet Compliance Needs</h3>
<ul>
<li>How do you ensure that you <strong>comply with regulatory and compliance requirements</strong> around immutable storage in a Cloud Storage bucket?</li>
<li>Configure <strong>data retention policy</strong> with retention period:ÔºàÊï∏Êìö‰øùÂ≠òÁ≠ñÁï•)
<ul>
<li>How long should objects in the bucket be retained for?
<ul>
<li>&ldquo;Objects in the bucket can only be deleted or replaced once their age is greater than the retention period&rdquo;</li>
</ul>
</li>
<li>You can set it <strong>while creating a bucket or at a later point in time</strong>
<ul>
<li>Applies automatically to existing objects in the bucket (as well as new objects added in)</li>
</ul>
</li>
<li>Once a retention policy is locked:
<ul>
<li>You <strong>CANNOT</strong> remove retention policy or reduce retention period (but you can increase retention period)</li>
<li>You <strong>CANNOT</strong> delete the bucket unless all objects in bucket have age greater than retention period</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="transferring-data-from-on-premises-to-cloud">Transferring data from on premises to cloud</h3>
<ul>
<li>Most popular data destination is <strong>Google Cloud Storage</strong></li>
<li>Options:
<ol>
<li><strong>Online Transfer</strong>: Use <code>gsutil</code> or API to transfer data to GCS
<ul>
<li>Good for one time transfers</li>
</ul>
</li>
<li><strong>Storage Transfer Service</strong>: Recommended for large-scale (petabytes) online data transfers from your private data centers, AWS, Azure, and Google Cloud
<ul>
<li>You can set up a repeating schedule</li>
<li>Supports incremental transfer (only transfer changed objects)</li>
<li>Reliable and fault tolerant - continues from where it left off in case of errors</li>
</ul>
</li>
<li>Storage Transfer Service vs gsutil:
<ul>
<li><code>gsutil</code> is recommended only when you are transferring less than 1TB from on-premises or another GCS bucket</li>
<li><code>Storage Transfer Service</code> is recommended if either -
<ol>
<li>Transferring more than 1TB from anywhere, or</li>
<li>Transferring from another cloud</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="migrating-data-with-transfer-appliance">Migrating Data with Transfer Appliance</h3>
<ul>
<li>Transfer Appliance:
<ul>
<li>Copy ship and upload data to GCS</li>
<li>Recommended if your data size is greater than <strong>20TB</strong>, or online <strong>transfer time takes &gt; 1 week</strong></li>
<li>Process:
<ol>
<li>Request an appliance</li>
<li>Upload your data</li>
<li>Ship the appliance back</li>
<li>Google uploads the data</li>
</ol>
</li>
<li>Fast copy (upto 40 Gbps)</li>
<li>AES256 encryption - Customer-managed encryption keys</li>
<li>Order <strong>multiple devices</strong> (TA40, TA300) if need</li>
</ul>
</li>
</ul>
<h3 id="understanding-cloud-storage-best-practices">Understanding Cloud Storage Best Practices</h3>
<ul>
<li>Avoid use of sensitive info in bucket or object names</li>
<li>Store data in the <strong>closest region</strong> (to your users)</li>
<li>Ramp up <strong>request rate gradually</strong>
<ul>
<li>No problems upto 1000 write request per second or 5000 read requests per second</li>
<li>BUT beyond that, take at least 20 minutes to double request rates</li>
</ul>
</li>
<li>Use <strong>Exponential backoff</strong> if you receive 5xx (server error) or 429 (to many requests) error
<ul>
<li>Retry after 1, 2, 4, 8, 16, &hellip;seconds</li>
</ul>
</li>
<li><strong>Do NOT use sequential</strong> numbers or timestamp as object keys
<ul>
<li>Recommended to use completely random object names</li>
<li>Recommended to add a hash value before the sequence number or timestamp</li>
</ul>
</li>
<li><strong>Use Cloud Storage FUSE</strong> to enable file system access to Cloud Storage
<ul>
<li>Mount Cloud Storage buckets as file systems on Linux or macOS systems</li>
</ul>
</li>
</ul>
<h3 id="cloud-storage---command-line">Cloud Storage - command line</h3>
<ul>
<li>
<p><code>gsutil</code> is the CLI for Cloud Storage (NOT <code>gcloud</code>)</p>
</li>
<li>
<p>Cloud Storage</p>
<ul>
<li>
<p><code>gsutil mb gs://BKT_NAME</code> -&gt; Create Cloud Storage bucket</p>
</li>
<li>
<p><code>gsutil ls -a gs://BKT_NAME</code> -&gt; List current and non-current object versions</p>
<blockquote>
<p><code>-a</code> for displaying non-current ones</p>
</blockquote>
</li>
<li>
<p><code>gsutil cp gs://SOURCE_BKT/SRC_OBJ gs://DESTINATION_BKT/NAM_COPY</code> -&gt; Copy objects</p>
<ul>
<li><code>-o 'GSUtil:encryption_key=ENCRYPTION_KEY'</code> -&gt; Encrypt object</li>
</ul>
</li>
<li>
<p><code>gsutil mv</code> (Rename or move objects)</p>
<ul>
<li><code>gsutil mv gs://BKT_NAME/OLD_OBJ_NAME gs://BKT_NAME/NEW_OBJ_NAME</code></li>
<li><code>gsutil mv gs://OLD_BUCKET_NAME/OLD_OBJ_NAME gs://NEW_BKT_NAME/NEW_OBJ_NAME</code></li>
</ul>
</li>
<li>
<p><code>gsutil rewrite -s STORAGE_CLASS gs://BKT_NAME/OBJ_PATH</code> (e.g. Change Storage Class for objects)</p>
</li>
<li>
<p><code>gsutil cp</code>: Upload and Download Objects</p>
<ul>
<li><code>gsutil cp LOCAL_LOCATION gs://DESTINATION_BKT_NAME/</code> -&gt; Upload</li>
<li><code>gsutil cp gs://BKT_NAME/OBJ_PATH LOCAL_LOCATION</code> -&gt; Download</li>
</ul>
</li>
<li>
<p><code>gsutil versioning set on/off gs://BKT_NAME</code> -&gt; Enable/Disable versioning</p>
</li>
<li>
<p><code>gsutil uniformbucketlevelaccess set on/off gs://BKT_NAME</code>
-&gt; If set off, you can configure permissions to objects at the level of individual objects</p>
</li>
<li>
<p><code>gsutil acl ch</code> -&gt; Set access permissions for specific objects
-&gt; Used when uniform-bucket-level-access is set OFF.</p>
<blockquote>
<p><code>acl</code> - access control list</p>
<p><code>ch</code> - change</p>
<p>E.g.: <code>gsutil acl ch -u AllUsers:R gs://BKT_NAME/OBJ_PATH</code>
-&gt; make specific object public</p>
<p>E.g.: <code>gsutil acl ch -u john.doe@gmail.com:WRITE gs://BKT_NAME/OBJ_PATH</code>
-&gt; <strong>Permissions</strong> - READ(R), WRITE(W), OWNER(O)
-&gt; <strong>Scope</strong> - User, allAuthenticatedUsers, allUsers(-u), Group(-g), Project(-p) etc</p>
<p>E.g.: <code>gsutil acl set JSON_FILE gs://BKT_NAME</code>
-&gt; use Json files to set ACLs on the bucket</p>
</blockquote>
</li>
<li>
<p><code>gsutil iam ch MBR_TYPE:MBR_NAME:IAM_ROLE gs://BKT_NAME</code>
-&gt; set up IAM role.</p>
<blockquote>
<p>{memberType}:{memberName}:{IAMrole}
E.g.: <code>gsutil iam ch user:melissa@gmail.com:objectCreator gs://BKT_NAME</code>
E.g.: <code>gsutil iam ch allUsers:objectViewer gs://BKT_NAME</code>
-&gt; make the entire bucket readable to public</p>
</blockquote>
</li>
<li>
<p>[Temporary] <code>gsutil signal -d 10m YOUR_KEY gs://BKT_NAME/OBJ_PATH</code>
-&gt; signed URL for temporary access ( -d {10_minutes} {service_account_key})</p>
</li>
</ul>
</li>
</ul>
<h3 id="scenarios">Scenarios</h3>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td>I will frequently access objects in a bucket for 30 days. After that I don&rsquo;t expect to access objects at all. We have compliance requirements to store objects for 4 years. How can I minimize my costs?</td>
<td>Initial Storage Class - Standard.  Lifecycle policy: Move to Archive class after 30 days. Delete after years.</td>
</tr>
<tr>
<td>I want to transfer 2 TB of data from Azure Storage to Cloud Storage</td>
<td>Use Cloud Storage Transfer Service</td>
</tr>
<tr>
<td>I want to transfer 40TB of data from on premises to Cloud Storage</td>
<td>Use Transfer Appliance</td>
</tr>
<tr>
<td>Customer wants to manage their Keys</td>
<td><strong>Customer-managed</strong>: Keys managed by customer in <strong>Cloud KMS</strong></td>
</tr>
<tr>
<td>Regulatory compliance: Object should not modified for 2 years</td>
<td>Configure and lock <strong>data retention policy</strong></td>
</tr>
</tbody>
</table>
<h1 id="section-16--">Section 16 -</h1>
<blockquote>
<p>Identity and access management - IAM</p>
</blockquote>
<h1 id="section-17">Section 17</h1>
<h1 id="section-18">Section 18</h1>
<p>Section 19</p>
<p>Section 20</p>
<h1 id="section-21">Section 21</h1>
<ul>
<li>To operate cloud app effectively
<ul>
<li>Is my app healthy?</li>
<li>Are the users experiencing any issues?</li>
<li>Does my db have enough space?</li>
<li>Are my servers running in an optimum capacity?</li>
</ul>
</li>
<li><strong>Cloud Monitoring</strong> - infrastructure monitoring</li>
</ul>
<h3 id="cloud-debugger">Cloud Debugger</h3>
<h3 id="cloud-proflier">Cloud Proflier</h3>
<ul>
<li>How do you identify performance bottlenecks in production?</li>
<li>Cloud Profiler - Statistical, low-overhead profiler
<ul>
<li>Continuously gathers CPU and Memory usage from production</li>
</ul>
</li>
</ul>
<h3 id="error-reporting">Error Reporting</h3>
<ul>
<li>How do you idenfiy production problems in real time?</li>
<li>Real-time exception monitoring:
<ul>
<li>Aggregates and displays error reported from cloud services (using stack traces)</li>
<li>Centralized Error Management console:
<ul>
<li>Identity and manage top errors or recent errors</li>
</ul>
</li>
<li>Use Firebase Crash Reporting for errors from Android and iOS client applications</li>
<li>Supported for GO, Java, .NET, Node.js, PHP, Python and Ruby</li>
</ul>
</li>
<li></li>
<li></li>
</ul>
<h3 id="cloud-logging-monitoring----stackdriver">Cloud Logging, Monitoring .. - Stackdriver</h3>
<table>
<thead>
<tr>
<th>Stackdriver Service</th>
<th>New Service Name</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>old names - new names: these are the same</p>
</blockquote>
<h3 id="cloud-operations-scenarios">Cloud Operations Scenarios</h3>
<table>
<thead>
<tr>
<th>Se</th>
<th>So</th>
</tr>
</thead>
<tbody>
<tr>
<td>To record all operations/requests on all objects in a bucket (for auditing)</td>
<td>Turn on data access audit logging for the bucket</td>
</tr>
<tr>
<td>To trace a request across multiple microservices</td>
<td>Cloud Trace</td>
</tr>
<tr>
<td>To identify prominent exceptions (or errors) for a specific microservice</td>
<td>Error Reporting</td>
</tr>
<tr>
<td>To debug a problem in production by executing step by step</td>
<td>Cloud Debugger</td>
</tr>
<tr>
<td>To look at the logs for a specific request</td>
<td>Cloud Logging</td>
</tr>
<tr>
<td>‚Äã</td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="section-22">Section 22</h1>
<h3 id="heading"></h3>
<ul>
<li>Well defined hierarchy:
+</li>
<li>Resources are created in projects</li>
<li>A folder can contain multiple projects</li>
<li>Organization can contain multiple folders</li>
</ul>
<h3 id="resource-hierarchy---recommendations-for-enterprises">Resource Hierarchy - Recommendations for Enterprises</h3>
<ul>
<li>Create separate projects for different environments
<ul>
<li>Complete isolation between test and production environments</li>
</ul>
</li>
<li>Create separate folders for each department
<ul>
<li>Isolate production applications of one department from another</li>
<li>We can create a shared folder</li>
</ul>
</li>
<li>One project per application per environment
+</li>
</ul>
<h3 id="billing-accounts">Billing Accounts</h3>
<ul>
<li>Billing Account is mandatory for creating resources in a project:
+</li>
<li>Billing Accounts can be associated with one or more projects</li>
<li>You can have multiple billing accounts in a Organization</li>
<li>(Recommendation)</li>
<li>Two Types
<ul>
<li>Self Serve</li>
<li>Invoiced</li>
</ul>
</li>
</ul>
<h3 id="managing-billing---budget-alerts-and-exports">Managing Billing - Budget, Alerts and Exports</h3>
<ul>
<li>Setup a Cloud Billing Budget to avoid surprises:
<ul>
<li>()</li>
<li>Default alert thresholds</li>
</ul>
</li>
<li>Billing data can be exported (on a schedule) to:
<ul>
<li>BigQuery</li>
<li>Cloud Storage ()</li>
</ul>
</li>
</ul>
<h3 id="iam-best-practices">IAM Best Practices</h3>
<ul>
<li><strong>Principle of Least Privilege</strong> - Give least possible privilege needed for a role
<ul>
<li>Basic Roles are NOT recommended
<ul>
<li>Prefer predefined roles when possible</li>
</ul>
</li>
<li>Use Service Accounts with minimum privileges
<ul>
<li>Use different Service Accounts for different apps/purposes</li>
</ul>
</li>
</ul>
</li>
<li><strong>Separation of Duties</strong> - Involve at least two people in sensitive tasks
<ul>
<li>Example: Have separate deployer and traffic migrator roles
<ul>
<li>AppEngine provides App Engine</li>
</ul>
</li>
</ul>
</li>
<li>Constant Monitoring:
<ul>
<li>Archive Cloud Audit Logs in Cloud Storage buckets for long term retention</li>
</ul>
</li>
<li>Use Groups when possible
<ul>
<li>Makes it easy to manage users</li>
</ul>
</li>
</ul>
<h3 id="user-identity-management-in-google-cloud">User Identity Management in Google Cloud</h3>
<ul>
<li>Email used to create free trial account =&gt; &ldquo;Super Admin&rdquo;
+</li>
<li></li>
<li>However &hellip;</li>
<li>Option1:</li>
<li>Option2:
<ul>
<li>Federate Google Cloud with your identity provider</li>
</ul>
</li>
</ul>
<blockquote>
<p>Google Workspace (formerly G Suite)</p>
</blockquote>
<h3 id="corporate-directory-federation">Corporate Directory Federation</h3>
<ul>
<li>Federate Cloud Identity or Google Workspace with your external identity provider (IdP) such as Active Directory of Azure Active Directory</li>
<li>Enable Single Sign On:
<ol>
<li>Users are redirected to an external IdP to authenticate</li>
<li>When users are authenticated, SAML assertion is sent to Google sign-in</li>
</ol>
</li>
<li>Examples
<ul>
<li>Federate Active Directory with Cloud Identity by using Google Cloud Directory Sync (GCDS) and Active Directory Federation Services (AD FS)</li>
<li>Federating Azure</li>
</ul>
</li>
</ul>
<h3 id="iam-membersidentities">IAM Members/Identities</h3>
<ul>
<li>Google Account - Represents a person (an)</li>
<li>Service account - Represents an application account (Not person)</li>
<li>Google group - Collection - Google and Service Accounts
+</li>
<li>Google Workspace domain: Google Workspace (formerly G suite) provides collaboration services for enterprises:
+</li>
<li></li>
</ul>
<h3 id="iam-membersidentities---use-cases">IAM Members/Identities - Use Cases</h3>
<table>
<thead>
<tr>
<th>Sc</th>
<th>Sol</th>
</tr>
</thead>
<tbody>
<tr>
<td>All members in your team have G Suite accounts. You are creating a new production project and would want to provide access to your operations team.</td>
<td>Create a Group with all your operations team. Provide access to production project to the Group.</td>
</tr>
<tr>
<td>All members in your team have G Suite accounts. You are setting up a new project. You want to provide a one time quick access to a team member.</td>
<td>Assign the necessary role directory to G Suite email address of your team member. If it&rsquo;s not a one time quick access, the recommended approach would be to create a Group.</td>
</tr>
<tr>
<td>You want to provide an external auditor access to view all resources in your project BUT he should NOT be able to make any changes.</td>
<td>Give them roles/viewer role (Generally basic roles are NOT recommended BUT it is the simplest way to provide view only access to all resources!)</td>
</tr>
<tr>
<td>Your application deployed on a GCE VM (Project A) needs to access cloud storage bucket from a different project (Project B)</td>
<td>In Project B, assign the right role &hellip;</td>
</tr>
</tbody>
</table>
<h3 id="organization-policy-service">Organization Policy Service</h3>
<ul>
<li>How to enable <strong>centralized constraints</strong> on all resources created in an Organization?
<ul>
<li>Configure Organization Policy</li>
<li>e.g.: Disable creation of Service Accounts</li>
<li>e.g.: Allow/Deny creation of resources in specific regions</li>
</ul>
</li>
<li>Needs a Role - Organization Policy Administrator</li>
<li>(Remember) IAM focuses on Who
<ul>
<li>Who can take specific actions on resources?</li>
</ul>
</li>
<li>(Remember) Organization Policy focuses on What
<ul>
<li>What can be done on specific resources?</li>
</ul>
</li>
</ul>
<h3 id="resource-hierarchy--iam-policy">Resource Hierarchy &amp; IAM Policy</h3>
<ul>
<li>IAM Policy can be set at any level of the hierarchy</li>
<li>Resources inherit the policies of All parents</li>
<li>The effective policy for a resource is the union of the policy on that resource and its parents</li>
<li>Policy inheritance is transitive
+</li>
<li>You cannot restrict</li>
</ul>
<h3 id="cloud-bigquery-roles">Cloud BigQuery Roles</h3>
<blockquote>
<p>Data Operations: View</p>
<p>Query Operations:</p>
</blockquote>
<ul>
<li>Cloud BigQuery IAM Roles
<ul>
<li>BigQuery Admin</li>
<li>BigQuery Data Owner</li>
<li>BigQuery Data Editor</li>
<li>BigQuery Data Viewer</li>
<li>BigQuery Job User</li>
<li>BigQuery User</li>
</ul>
</li>
<li>To see data,</li>
<li>BigQUery DO or Data Viewer roles do NOT have access to jobs</li>
</ul>
<h3 id="corporate-directory-federation-1">Corporate Directory Federation</h3>
<ul>
<li>Federate Cloud Identity or Google Workspace with your external identity provider (IdP) such as Active Directory or Azure AD</li>
<li>Enable Single Sign On:
<ol>
<li>Users are redirected to an external IdP to authenticate</li>
<li>When users are authenticated, SAML assertion is sent to Google Sign-In</li>
</ol>
</li>
<li>Examples
<ul>
<li>Use Identity as a service (IDaaS) such as Okta as IdP (identity provider)
<ul>
<li>Use IDaaS (like Okta) for single sign-on</li>
</ul>
</li>
<li>Use Active Directory as IdP
<ul>
<li>Use Active Directory Federation Services (AD FS) for single sign-on</li>
<li>Use Google</li>
</ul>
</li>
<li>Use Azure AD as IdP
<ul>
<li>Use Azure AD for single sign-on</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="iam---scenarios">IAM - Scenarios</h3>
<table>
<thead>
<tr>
<th>Sc</th>
<th>Des</th>
</tr>
</thead>
<tbody>
<tr>
<td>To give permanent access to a sub set of objects in a Cloud Storage bucket</td>
<td>Use ACLs</td>
</tr>
<tr>
<td>To give permanent access to the entire bucket in a Cloud Storage bucket</td>
<td>Use IAM</td>
</tr>
<tr>
<td>To provide time limited access to a specific obj in a Cloud Storage bucket</td>
<td>Create a Signed URL</td>
</tr>
<tr>
<td>To give access to a set of resources to your development team</td>
<td>Create a group with your development team as member. Bind the right predefined roles to your group.</td>
</tr>
<tr>
<td>Which role? Upload obj to Cloud Storage</td>
<td>Storage Object Creator</td>
</tr>
<tr>
<td>Which role? Manage K8S API objects</td>
<td>Kubernetes Engine Developer</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Section 23</p>
<p>221</p>
<p>Section 24</p>
<h3 id="ÔΩéeed-for-asynchronous-communication">ÔºÆeed for Asynchronous Communication</h3>
<h3 id="asynchronous-communication---decoupled">Asynchronous Communication - Decoupled</h3>
<ul>
<li>Create a topic and have your applications put log messages on the topic</li>
<li>Logging service picks them up for processing when ready</li>
<li>Advantages
<ul>
<li>Decoupling: Publishers (apps) don&rsquo;t care</li>
<li>Availability:</li>
<li>Scalability:</li>
<li>Durability:</li>
</ul>
</li>
</ul>
<h3 id="pubsub">Pub/Sub</h3>
<ul>
<li>Reliable, scalable, fully-managed asynchronous messaging service</li>
<li>Backbone for <strong>highly available</strong> and <strong>highly scalable</strong> solutions
<ul>
<li>Auto scale to process billions of messages per day</li>
<li></li>
</ul>
</li>
<li>Usecases: Event ingestion and delivery for streaming analytics pipelines</li>
<li>Supports push and pull message deliveries</li>
</ul>
<h3 id="pubsub---how-does-it-work">Pub/Sub - How does it work?</h3>
<ul>
<li><strong>Publisher</strong> - Sender of a message
<ul>
<li>Publisher send messages by making HTTPS requests to pubsub.googleapis.com</li>
</ul>
</li>
<li><strong>Subscriber</strong> - Receiver of the message
<ul>
<li><strong>Pull</strong> - Subscriber pulls messages when ready
<ul>
<li>Subscriber makes HTTPs requests to pubs.googleapis.com</li>
</ul>
</li>
<li><strong>Push</strong> - Messages are snet to subscribers
<ul>
<li>Subscribers provide a web hook endpoint at the time of registration</li>
<li>When a message is received on the topic, a HTTPS POST request is sent to the web hook endpoints</li>
</ul>
</li>
</ul>
</li>
<li><strong>Very Flexible</strong>:
<ul>
<li>Publisher(s) and Subscriber(s) relationships: one to many, many to one, many to many</li>
</ul>
</li>
</ul>
<h3 id="pubsub---getting-ready-with-topic-and-subscriptions">Pub/Sub - Getting ready with Topic and Subscriptions</h3>
<ol>
<li>create topic</li>
<li>create subscription
<ul>
<li>subscribers register to the topic</li>
<li>each subscription represents discrete pull of messages form a topic
+</li>
</ul>
</li>
</ol>
<h3 id="pubsub---sending-and-receiving-a-message">Pub/Sub - Sending and Receiving a message</h3>
<ul>
<li>Publisher sends a message to topic</li>
<li>Message <strong>individually</strong> deliver to each and every subscription</li>
<li>Subscribers send acknowledgements(s)</li>
<li>Messages(s) are removed</li>
</ul>
<blockquote>
<pre tabindex="0"><code class="language-terminal" data-lang="terminal">gcloud config set project glowing-gracias-304608
gcloud pubsub topics create topic-from-gcloud
gcloud pubsub subscriptions create subscription-gcloud-1 --topic=topic-from-gcloud
gcloud pubsub subscriptions create subscription-gcloud-2 --topic=topic-from-gcloud
gcloud pubsub subscriptions pull subscription-gcloud-2
gcloud pubsub subscriptions pull subscription-gcloud-1
gcloud pubsub topics publish topic-from-gcloud --message=&#34;My First Message&#34;
gcloud pubsub topics publish topic-from-gcloud --message=&#34;My Second Message&#34;
gcloud pubsub topics publish topic-from-gcloud --message=&#34;My Third Message&#34;
</code></pre></blockquote>
<h1 id="section-25">Section 25</h1>
<blockquote>
<p>Hybrid Cloud options</p>
</blockquote>
<h3 id="cloud-vpn">Cloud VPN</h3>
<ul>
<li>Cloud VPN - Connect on-premise to GCP network over internet
<ul>
<li>Implemented using <strong>IPSec VPN Tunnel</strong></li>
<li>Traffic through internet (public)</li>
<li>Traffic encrypted using <strong>Internet Key Exchange</strong> protocol</li>
</ul>
</li>
<li>Two types of Cloud VPN solutions:
<ul>
<li><strong>HA VPN</strong> (SLA of 99.99% service availability with two external IP address)
<ul>
<li>Only dynamic routing (BGP) supported</li>
</ul>
</li>
<li><strong>Classic VPN</strong> (SLA of 99.9% service availability, a single external IP address)
<ul>
<li>Supports Static routing (policy-based, route-based) and dynamic routing using BGP</li>
</ul>
</li>
</ul>
</li>
<li>Easy to establish: Does NOT need carrier circuits or contracts</li>
<li>Go for Cloud VPN if:
<ul>
<li>You want the network to encrypt traffic OR</li>
<li>You want a lower throughput, low cost solution OR</li>
<li></li>
</ul>
</li>
<li></li>
</ul>
<h3 id="cloud-vpn---vpn-gateway-peer-gateway-and-cloud-router">Cloud VPN - VPN Gateway, peer gateway and cloud router</h3>
<ol>
<li>HA VPN (<strong>high availability VPN</strong>)
<ul>
<li>High availability (99.99 SLA, within region)</li>
<li>Needs a cloud HA VPN gateway
<ul>
<li>Regional resources within two interfaces</li>
<li>Connects to an on-premises VPN gateway (or peer gateway) through VPN tunnels</li>
</ul>
</li>
</ul>
</li>
<li><strong>Classic VPN</strong>
<ol>
<li>No high availability</li>
<li>Needs a Google Compute Engine VPN gateway</li>
</ol>
</li>
</ol>
<p>(REMEMBER) VPN gateway - regional resource</p>
<p>(REMEMBER) Cloud router enables dynamic routing: Enables automatic route update when network topology changes</p>
<h3 id="cloud-interconnect">Cloud Interconnect</h3>
<ul>
<li>
<p>High speed, highly available, low-latency private connection into Google Cloud from your company&rsquo;s on-premises network</p>
</li>
<li>
<p><strong>Dedicate Interconnect</strong>: Ideal if you need high-bandwidth connection for large data transfers</p>
<ul>
<li>Min private connection speed of 10Gbps (OPTIONS: 10 GBps or 100 Gbps)
<ul>
<li>Go upto 8 x 10 Gbps (80Gbps) circuits, or 2 x 100 Gbps(200 Gbps) circuits for each connection</li>
</ul>
</li>
<li>Takes time to establish</li>
</ul>
</li>
<li>
<p><strong>Partner Interconnect</strong>: Ideal if you need a private connection with lower bandwidth needs</p>
<ul>
<li>50Mbps to 10Gbps</li>
</ul>
</li>
<li>
<p>Data exchange happens through a private network:</p>
<ul>
<li>Communicate using VPC network&rsquo;s internal IP addresses from on-premise network</li>
<li>Reduces egress costs
<ul>
<li>As public internet is not used</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="hybrid-connectivity---remember">Hybrid Connectivity - Remember</h3>
<ul>
<li>When you connect networks, ensure that resources on the networks <strong>use different range of IP address</strong>!</li>
<li>Always think: What will we do if things go wrong?
<ul>
<li>Have a fallback option if the primary connection from on-premise to GCP fails
<ul>
<li>Dedicated interconnect as primary</li>
<li>VPN as backup in case of failure</li>
</ul>
</li>
</ul>
</li>
<li>Remember that there is a third hybrid connectivity option:
<ul>
<li>Direct Peering: Connect customer network to google network using network peering
<ul>
<li>Direct path from on-ppremises network to Google services</li>
<li>Not a GCP Service
<ul>
<li>Lower level network connection outside of GCP</li>
</ul>
</li>
<li>NOT RECOMMENDED:
<ul>
<li>Use Cloud Interconnect and Cloud VPN</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="section-26">Section 26</h1>
<h3 id="bigquery---datawarehouse">BigQuery - Datawarehouse</h3>
<ul>
<li>Exabyte scale modern Datawarehousing solution from GCP
<ul>
<li>Relational database (SQL, schema, consistency etc)
<ul>
<li>Use <strong>SQL-like commands</strong> to query massive datasets</li>
</ul>
</li>
<li>Traditional (Storage + Compute) + Modern (Realtime + Serverless)</li>
</ul>
</li>
<li>When we are talking about a Datawarehouse, <strong>importing and exporting data (and formate) becomes very important</strong>
<ul>
<li>Load data form a variety of sources, incl. streaming data
<ul>
<li>Variety of import formats - CSV/JSON/Avro/Parquet/ORCDatastore backup</li>
</ul>
</li>
<li>Export to Cloud Storage (long term storage) &amp; Data Studio (visualization)
<ul>
<li>Formats - CSV/JSON (with Gzip compression), Avro (with deflate or snappy compression)</li>
</ul>
</li>
<li>Automatically expire data (Configurable Table Expiration)</li>
<li>Query external data sources without storing data in BigQuery
<ul>
<li>Cloud Storage, Cloud SQL, BigTable, Google Drive</li>
<li>Use <strong>Permanent or Temporary</strong> external tables</li>
</ul>
</li>
</ul>
</li>
<li>Automatically expire data (<strong>Configurable Table Expiration</strong>)</li>
<li>Query <strong>external data sources</strong> without storing data in BigQuery
<ul>
<li>Cloud Storage, Cloud SQL, BigTable, Google Drive</li>
<li>Use <strong>Permanent</strong> or <strong>Temporary</strong> external tables</li>
</ul>
</li>
</ul>
<h3 id="bigquery---accessing-and-querying-data">BigQuery - Accessing and Querying Data</h3>
<ul>
<li>Access databases using
<ul>
<li>Cloud console</li>
<li>Bq command-line tool (NOT gcloud)</li>
<li>BigQuery Rest API, or</li>
<li>HBase API based libraries (Java, .NET, Python)</li>
</ul>
</li>
<li>(Remember) BigQuery queries can be expensive as you are running them on large data sets</li>
<li>(Best practice) <strong>Estimate BigQuery queries before running</strong>
<ol>
<li>Use UI(console) / bq (&ndash;dry-run) : Get scanned data volume (estimated)</li>
<li>Use Pricing Calculator : Find price for scanning 1MB data. Calculate cost.</li>
</ol>
</li>
</ul>
<h3 id="partitioning-and-clustering-bigquery-tables---use-case">Partitioning and Clustering BigQuery Tables - Use Case</h3>
<ul>
<li>You pay for BigQuery queries by the amount of data scanned</li>
<li>How do you reduce your costs of querying BigQuery and improve performance?</li>
<li>Scenario: Imagine a Questions table with millions of rows
<ul>
<li>You want to find all questions asked between a date range (date between 2022-10-02 and 2028-10-02) belonging to a specific category
<ul>
<li>If you have a single questions table you need to scan all the rows
<ul>
<li>Partitioning - Divide table into multiple segments (e.g. by date)</li>
<li>Clustering - Group related data (e.g. by category)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="partitioning-and-clustering-bigquery-tables">Partitioning and Clustering BigQuery Tables</h3>
<ul>
<li><strong>Partitioning</strong>: Table is divided into segments
<ul>
<li>Makes it easy to manage and query your data</li>
<li>Improves performance and reduces costs</li>
<li>Partition based on Ingestion time (arrival time) OR a column (TIMESTAMP, DATE, or DATETIME, or INTEGER)</li>
<li>(DEFAULT) All partitions will share same schema as table</li>
<li>Allows you to expire (delete) parts of table data easily (portion_expiration_days)</li>
</ul>
</li>
<li><strong>Clustering</strong>: Organize table data based on the contents of one or more columns
<ul>
<li>Goal: colocate related data and eliminate scans of unnecessary data</li>
<li>Avoid creating too many small partitions (of less than 1GB). In those cases, prefer Clustering</li>
</ul>
</li>
</ul>
<h3 id="partitioning-and-clustering-bigquery-tables---syntax">Partitioning and Clustering BigQuery Tables - Syntax</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-SQL" data-lang="SQL"><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">my_data_set</span><span class="p">.</span><span class="n">questions_partitioned_and_clustered</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">PARTITIONED</span><span class="w"> </span><span class="k">BY</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nb">DATE</span><span class="p">(</span><span class="n">created_date</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">CLUSTER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">category</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">OPTIONS</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">expiration_timestamp</span><span class="o">=</span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="s2">&#34;2023-05-01 03:02:00 UTC&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">partition_expiration_days</span><span class="o">=</span><span class="mi">7</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="expiring-data-in-bigquery">Expiring Data in BigQuery</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">mydataset</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">OPTIONS</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">default_table_expiration_days</span><span class="o">=</span><span class="mi">3</span><span class="p">.</span><span class="mi">75</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">A</span><span class="w"> </span><span class="n">LTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">mydataset</span><span class="p">.</span><span class="n">mytable</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SET</span><span class="w"> </span><span class="k">OPTIONS</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">expiration_timestamp</span><span class="o">=</span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="s2">&#34;2025-01-01 00:00:00 UTC&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">partition_expiration_days</span><span class="o">=</span><span class="mi">7</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>You pay for data stored in BigQuery:</p>
<ul>
<li>How can you automatically delete (expire) data which is not needed?</li>
</ul>
</li>
<li>
<p>Big Query Hierarchy: Data Set &gt; Table &gt; Partitions</p>
<ul>
<li>You can configure expiration at each level
<ul>
<li>Configure default table expiration (default_table_expiration_days) for datasets</li>
<li>Configure expiration time (expiration_timestamp) for tables</li>
<li>Configure partition expiration (partition_expiration_days) for partitioned tables</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Best Practice: Expire Tables and Partitions you are NOT using!</p>
</li>
</ul>
<h3 id="importing-data-into-bigquery">Importing Data into BigQuery</h3>
<ul>
<li><strong>Batch Import</strong> (FREE):
<ul>
<li>Import from Cloud Storage and local files</li>
<li>Import after processing by Cloud Dataflow and Cloud Dataproc</li>
</ul>
</li>
<li><strong>Streaming Import</strong> ($$$$):
<ul>
<li>From Cloud Pub/Sub, Streaming Inserts</li>
<li>Import after processing by Cloud Dataflow and Cloud Dataproc</li>
</ul>
</li>
<li><strong>Federated Queries</strong>: Query external data
<ul>
<li>Cloud Storage, Cloud SQL, BigTable, Google Drive</li>
</ul>
</li>
<li><strong>BigQuery Data Transfer Service</strong>:  Import from
<ul>
<li>Google SaaS apps (Google Ads, Cloud Storage, etc)</li>
<li>External cloud storage providers, e.g. Amazon S3</li>
<li>Data warehouses - Teradata, Amazon Redshift</li>
</ul>
</li>
</ul>
<h3 id="streaming-data-into-bigquery">Streaming Data into BigQuery</h3>
<ul>
<li>Loading data in bulk is free <strong>but streaming data is NOT FREE</strong>
<ul>
<li>AND there are a lot of limitations (Use with caution!)</li>
</ul>
</li>
<li>Streaming data can contain duplicates. How can you avoid duplicates?
<ul>
<li>Add <strong>insertId</strong> with each streaming insert:
<ul>
<li><code>insertId</code> is used to provide best effort de-duplication (for up to one minute)
<ul>
<li>For strict de-duplication and transactions, try Google Cloud Datastore</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>There are <strong>strict streaming quotas</strong> with BigQuery
<ul>
<li>IF you are NOT populating <code>insertId</code>
<ul>
<li>Max bytes per second - 1GB per sec, per project
(REMEMBER per project - NOT per table)</li>
</ul>
</li>
<li>ELSE (i.e. you are using <code>insertId</code>)
<ul>
<li>Maximum rows per second per project
<ul>
<li>US and EU multi-regions: 500,000
Other locations: 100,000</li>
<li>Per table limitation: 100,000</li>
</ul>
</li>
<li>Maximum bytes per second: 100 MB</li>
</ul>
</li>
<li>If you have streaming of millions of rows per second, prefer BigTable!</li>
</ul>
</li>
</ul>
<h3 id="understanding-bigquery-best-practices">Understanding BigQuery Best Practices</h3>
<ul>
<li>Estimate your queries before running them
<ul>
<li><code>bq --dry_run flag</code> or dryRun API parameter</li>
</ul>
</li>
<li>Use clustering and partitioning for your tables</li>
<li><strong>Avoid streaming inserts</strong> when possible
<ul>
<li>Loading data in bulk is free but streaming data is NOT FREE</li>
<li>Offers Best effort de-duplication (when you use <code>insertId</code>)</li>
<li>Remember Quota limits</li>
</ul>
</li>
<li><strong>Expire Data Automatically</strong>
<ul>
<li>Configure default table expiration (default_table_expiration_days) for datasets</li>
<li>Configure expiration time for tables</li>
<li>Configure partition expiration for partitioned tables</li>
</ul>
</li>
<li>Consider <strong>Long-term storage</strong> option
<ul>
<li>Long-term storage: table in which data is NOT edited for 90 consecutive days</li>
<li>Low Storage cost - similar to Cloud Storage Nearline</li>
</ul>
</li>
<li>BigQuery is fast for <strong>complex queries</strong>
<ul>
<li>BUT it is not as well optimized for narrow-range queries (prefer Cloud Bigtables)</li>
<li>(REMEMBER) Too much complexity in setting up a query</li>
</ul>
</li>
<li><strong>Optimize BigQuery usage</strong> using audit logs:
<ul>
<li>Analyze queries/jobs that were run earlier</li>
<li>Stream your audit logs (BigQueriesAuditMetadata) to BigQuery</li>
</ul>
</li>
<li></li>
</ul>
<h3 id="cloud-dataproc">Cloud Dataproc</h3>
<ul>
<li>Managed <strong>Spark and Hadoop</strong> service:
<ul>
<li>Variety of jobs are supported
<ul>
<li>Spark, PySpark, SparkR, Hive, SparkSQL, Pig, Hadoop</li>
</ul>
</li>
<li>Perform complex batch processing</li>
</ul>
</li>
<li><strong>Multiple Cluster Modes</strong>:
<ul>
<li>Single Node / Standard / High Availability (3 masters)</li>
<li>Use regular / preemptible VMs</li>
</ul>
</li>
<li>Use case: Move your Hadoop and Spark clusters to the cloud
<ul>
<li>Perform your machine learning and AI development using open source frameworks</li>
</ul>
</li>
<li>(REMEMBER) Cloud Dataproc is a data analysis platform
<ul>
<li>You can export cluster configuration but NOT data</li>
</ul>
</li>
<li>(ALTERNATIVE) BigQuery - When you run SQL queries on Petabytes
<ul>
<li>Go for Cloud Dataproc when you need more than queries
(e.g. Complex batch processing Machine Learning and AI workloads)</li>
</ul>
</li>
</ul>
<h1 id="section-27">Section 27</h1>
<h3 id="data-lifecycle">Data Lifecycle</h3>
<ul>
<li>Four Steps:
<ol>
<li>Ingest: Stream or batch ingest</li>
<li>Store: Durably and cost efficiently store data in a convenient format</li>
<li>Process and analysis: Convert data to information (normalization or aggregations)</li>
<li>Explore and visualize: Flexibility to play with data/information. Get and share insights</li>
</ol>
</li>
</ul>
<h3 id="data-lifecycle---1---ingest">Data Lifecycle - 1 - Ingest</h3>
<ul>
<li>Streaming: Pub/Sub</li>
<li>Batch: Storage Transfer Service, BigQuery Transfer Service, Transfer Appliance, gsutil etc</li>
<li>Database migration: Migrate data from other sources to Google Cloud
<ul>
<li>Data Migration Service (Simplifying migrations to Cloud SQL)</li>
<li>Batch transfer to Cloud Storage</li>
<li>Load data into database from Cloud Storage using Dataflow</li>
</ul>
</li>
</ul>
<h3 id="data-lifecycle---2---store">Data Lifecycle - 2 - Store</h3>
<table>
<thead>
<tr>
<th>Service</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cloud Storage</td>
<td>Object Storage (unstructured data)</td>
</tr>
<tr>
<td>Cloud SQL</td>
<td>Managed MySQL, PostgreSQL, and MS SQL Server databases<!-- raw HTML omitted -->Relational, pre-defined schema, strong transactions, regional</td>
</tr>
<tr>
<td>Cloud Spanner</td>
<td>Horizontally scalable relational database<!-- raw HTML omitted -->Relational, pre-defined schema, strong transactions, high availability, and global scale</td>
</tr>
<tr>
<td>Cloud Firestore</td>
<td>Flexible, scalable, transactional NoSQL database</td>
</tr>
<tr>
<td>Cloud Bigtable</td>
<td>Managed wide-column NoSQL.  <!-- raw HTML omitted -->Petabyte scale, Real-time apps and large-scale analytical time-series workloads, single-row transactions</td>
</tr>
<tr>
<td>BigQuery</td>
<td>Managed data warehouse</td>
</tr>
<tr>
<td>Custom Database</td>
<td>Use cloud marketplace to deploy an open source database of your choice - MongoDB, Cassandra, etc.</td>
</tr>
</tbody>
</table>
<h3 id="data-lifecycle---3---process-and-analysis">Data Lifecycle - 3 - Process and analysis</h3>
<blockquote>
<p>Row Data &gt; Actionable Information (Clean, Transform)</p>
</blockquote>
<table>
<thead>
<tr>
<th>Service</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td>Dataprep</td>
<td>Clean and prepare data.  Fully managed, No-Ops.<!-- raw HTML omitted -->Usecases: Clean data on-boarded from external sources. Prepare data for ML.<!-- raw HTML omitted -->Visual approach for non programmers</td>
</tr>
<tr>
<td>Cloud Data Loss Prevention</td>
<td>Scan, discover, classify, and report on data in Cloud Storage, BigQuery, and Datastore (mask, tokenize, and transform sensitive elements)</td>
</tr>
<tr>
<td>Dataflow</td>
<td>More flexible ETL pipelines (Fully managed, No-Ops, Batch and Streaming)</td>
</tr>
<tr>
<td>Dataproc</td>
<td>Complex processing using Spark and Hadoop. <!-- raw HTML omitted -->Needs a cluster with compute engine VMs. <!-- raw HTML omitted -->Usecases: Machine learning, migrate existing Spark and Hadoop workloads</td>
</tr>
</tbody>
</table>
<h3 id="data-lifecycle---4---explore-and-visualize">Data Lifecycle - 4 - Explore and visualize</h3>
<table>
<thead>
<tr>
<th>Service</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cloud BigQuery</td>
<td>Managed data warehouse, Standard SQL,<!-- raw HTML omitted --> serverless, separate storage and compute</td>
</tr>
<tr>
<td>ML - pre built models</td>
<td>Vision API, Speech-to-Text, Natural Language API, Video Intelligence API etc</td>
</tr>
<tr>
<td>ML - custom models</td>
<td>Use AI platform (based on TensorFlow)<!-- raw HTML omitted -->Use Dataflow for pre-processing</td>
</tr>
<tr>
<td>Cloud Datalab</td>
<td>Web based tool to explore, analyze and visualize data. <!-- raw HTML omitted -->Based on Jupyter notebooks (Use Python, SQL queries etc).  <!-- raw HTML omitted -->Support for popular data-science toolkits - pandas, numpy and scikit-learn</td>
</tr>
<tr>
<td>Cloud Data Studio</td>
<td>Dashboarding and visualization<!-- raw HTML omitted -->Live charts and graphs based on data in Cloud SQL, BigQuery etc</td>
</tr>
<tr>
<td>Cloud Data Catalog</td>
<td>Data discovery and metadata management<!-- raw HTML omitted -->Unified view of all datasets<!-- raw HTML omitted -->Tag sensitive data using Cloud Data Loss Prevention (DLP)</td>
</tr>
</tbody>
</table>
<h3 id="big-data-and-analytics-in-gcp">Big Data and Analytics in GCP</h3>
<table>
<thead>
<tr>
<th>Service</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pub/Sub</td>
<td>Foundation for stream analytics and event-driven systems</td>
</tr>
<tr>
<td>BigQuery</td>
<td>Serverless data warehouse to analyze petabytes of data.  Scale storage and compute separately.</td>
</tr>
<tr>
<td>Google Data Studio</td>
<td>Managed visual analytics service</td>
</tr>
<tr>
<td>Dataflow</td>
<td>Data pipelines for (Stream + Batch) use cases</td>
</tr>
<tr>
<td>Dataproc</td>
<td>Managed Apache Spark and Apache Hadoop clusters</td>
</tr>
<tr>
<td>Dataprep</td>
<td>Clean and prepare data (structured and unstructured)</td>
</tr>
<tr>
<td>Datalab</td>
<td>Explore, analyze and visualize data on Jupyter notebooks (use python, SQL queries etc).  <!-- raw HTML omitted -->Integrates well with BigQuery</td>
</tr>
<tr>
<td>Cloud Composer</td>
<td>Managed workflow orchestration service<!-- raw HTML omitted -->Create pipelines across clouds and on-premises data centers</td>
</tr>
</tbody>
</table>
<h3 id="heading-1">&hellip;</h3>
<p>&hellip;</p>
<p>Section 28</p>
<p>252</p>
<p>Section 29</p>
<p>257</p>
<p>Section 30</p>
<p>270</p>
<p>Section 31</p>
<p>278</p>
<p>Section 32</p>
<p>281</p>
<h1 id="section-33">Section 33</h1>
<h3 id="architect-understand-business-requirements">Architect: Understand Business Requirements</h3>
<ul>
<li>Business Requirements: Define what your business needs</li>
<li>Examples of Business Requirements:
<ul>
<li>Reduce costs (Understand Capital Expenditure vs Operational Expenditure)
<ul>
<li>Managed Services</li>
<li>Autoscaling</li>
<li>Preemptible VMs</li>
</ul>
</li>
<li>Increase pace of innovation
<ul>
<li>Evaluate and adopt emerging processes like DevOps (CI/CD) and SRE</li>
<li>Evaluate and adopt emerging architectures like Microservices</li>
</ul>
</li>
<li>Reduce mean time to recovery</li>
<li>Improve compliance with regulations</li>
<li>More visibility into applications and infrastructure (metrics)</li>
<li>More intelligence from the available data</li>
</ul>
</li>
</ul>
<h3 id="total-cost-of-ownership">Total Cost of Ownership</h3>
<ul>
<li>Total Cost of Ownership (TCO) includes
<ul>
<li>Licensing Costs (Software + Hardware)</li>
<li>Computing costs</li>
<li>Storage costs</li>
<li>Networking costs (connection cost + Data ingress + Data egress)</li>
</ul>
</li>
<li></li>
</ul>
<h3 id="defining-technical-requirements">Defining Technical Requirements</h3>
<ul>
<li>Technical aspects that your system must adhere to
<ul>
<li>Functional
<ul>
<li>Must use containers</li>
<li>Must use hardened Linux OS</li>
<li>Needs container orchestration</li>
<li>Must be auto scale</li>
</ul>
</li>
<li></li>
</ul>
</li>
</ul>
<h3 id="planning-for-high-availability">Planning for High Availability</h3>
<table>
<thead>
<tr>
<th>service/feature</th>
<th>features/best practices</th>
</tr>
</thead>
<tbody>
<tr>
<td>Geographical Distribution</td>
<td>Avaiability: Global &gt; Multi-Regional &gt; Regional &gt; Zonal</td>
</tr>
<tr>
<td>Compute Engine</td>
<td>Live Migration<!-- raw HTML omitted -->Managed Instance Groups with AutoScaling and Health Checks (auto healing)<!-- raw HTML omitted -->Distribute instances across regions/zones and distribute using Global Load Balancing</td>
</tr>
<tr>
<td>GKE</td>
<td>Multi master, Regional clusters with pod and cluster autoscaling</td>
</tr>
<tr>
<td>Managed Services</td>
<td>Use Managed Services like App Engine, Cloud Functions, Cloud Storage, Cloud Filestore, Cloud Datastore, BigQuery</td>
</tr>
<tr>
<td>Persistent Disks</td>
<td>Live resizing improves availability<!-- raw HTML omitted -->Use Regional Persistent Disks</td>
</tr>
<tr>
<td>Cloud Bigtable</td>
<td>Place clusters in different zones or regions<!-- raw HTML omitted -->(Each cluster belongs to a zone and you can create multiple clusters for high availability in the same instance)</td>
</tr>
<tr>
<td>Cloud Datastore</td>
<td>Use multi-region locations</td>
</tr>
<tr>
<td>Cloud SQL</td>
<td>Use <strong>HA configuration</strong> (regional) - Cluster with primary instance and a standby instance is created<!-- raw HTML omitted -->Read replicas will NOT be promoted (so read replicas do NOT increase availability for Cloud SQL)</td>
</tr>
<tr>
<td><strong>Network Tier</strong></td>
<td><strong>Prefer Premium Network Tier</strong> to Standard Network Tier</td>
</tr>
<tr>
<td><strong>Hybrid Network Connectivity</strong></td>
<td>Speed and Availability: Dedicated interconnect &gt; Partner interconnect &gt; VPN<!-- raw HTML omitted -->Have a backup connection<!-- raw HTML omitted -->Example: VPN can be a backup for Dedicated interconnect or have multiple Dedicated interconnect connections</td>
</tr>
</tbody>
</table>
<h3 id="planning-for-scalability">Planning for Scalability</h3>
<ul>
<li>
<p><strong>High Scalable Compute Engine Architecture</strong> : VMs in MIG configured by instance template (and load balanced with Load Balancing)</p>
<ul>
<li>(Remember) Unmanaged Instance Groups do not support Auto Scaling</li>
</ul>
</li>
<li>
<p>Use <strong>Pod and Cluster Autoscaling</strong> for GKE</p>
<blockquote>
<ol>
<li>Pod autoscaling: increase the number of instances of a specific microservice</li>
<li>Cluster autoscaling: increase the number of nods in a cluster based on the number of pods you&rsquo;d want to run</li>
</ol>
</blockquote>
</li>
<li>
<p>Be cautious with resources that cannot scale fast</p>
<ul>
<li>Cloud SQL does NOT scale horizontally (only vertically)</li>
</ul>
</li>
<li>
<p>Stateful applications are more difficult to scale than Stateless applications</p>
<ul>
<li>You can move state to a cache (like Memorystore) or a database</li>
</ul>
</li>
</ul>
<h3 id="planning-for-scalability---2">Planning for Scalability - 2</h3>
<ul>
<li><strong>Persistent Disks</strong>: Can be scaled horizontally and vertically
<ul>
<li>You can increase the size of PD while it is attached to a VM</li>
<li>You can attach new PDs (up to a max of 128) while a VM is running</li>
</ul>
</li>
<li><strong>Compute</strong>:
<ul>
<li>Cloud storage, app engine and cloud functions are serverless (Auto Scaling)</li>
</ul>
</li>
<li><strong>Databases</strong>:
<ul>
<li>kPub/Sub, BigQuery and Cloud Datastore are serverless (Auto Scaling)</li>
<li>BigTable, Cloud Spanner, Cloud SQL, Dataproc are <strong>NOT serverless</strong>
<ul>
<li>You need to choose the number of nodes in the cluster (and also the type of node for Cloud SQL and Dataproc)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="planning-for-security-p-stylecolor-yellowciap">Planning for Security <!-- raw HTML omitted -->CIA<!-- raw HTML omitted --></h3>
<ul>
<li><strong>Confidentiality</strong> - Only right people have the right access
<ul>
<li>Follow <strong>IAM best practices</strong></li>
<li>Encryption at rest and in transit (along with physical controls)
<ul>
<li>(DEFAULT) GCP encrypts all data at rest</li>
</ul>
</li>
</ul>
</li>
<li><strong>Integrity</strong> - Protect data from unauthorized change
<ul>
<li>Follow <strong>IAM Best Practices</strong>
<ul>
<li>Role Based Access</li>
<li>Separation of duties</li>
</ul>
</li>
<li>Hash verifications and digital signatures</li>
</ul>
</li>
<li><strong>Availability</strong> - Systems/Data is/are available when users need them
<ul>
<li>Solutions: Firewalls, Redundancy, Automatic Failover etc</li>
<li>Protect from Denial of Service (DoS) attacks</li>
</ul>
</li>
</ul>
<h3 id="implementing-ddos-protection-and-mitigation">Implementing DDoS Protection and Mitigation</h3>
<ul>
<li><strong>(DDoS) attack</strong>: Attempting to bring your apps down with large scale attacks</li>
<li><strong>Shared responsibility</strong> between GCP and Customer
<ul>
<li>GCP provides certain features to protect your app from DDoS attacks
<ul>
<li><strong>Anti-spoofing</strong> protection for the private network</li>
<li><strong>Isolation</strong> between virtual networks</li>
<li>App Engine (sits behind Google Front End) automatically protects you from Layer 4 and below attacks
<ul>
<li>Examples: SYN floods, IP fragment floods, prot exhaustion, etc.</li>
</ul>
</li>
</ul>
</li>
<li>What you can do to protect apps from DDoS attacks?
<ul>
<li><strong>Reduce the attack surface</strong>: Make use of subnetworks and networks, firewall rules and IAM</li>
<li><strong>Isolate</strong> your internal traffic
<ul>
<li>Use private IP address (unless you need public IP addresses)</li>
<li>Use private load balancing for internal traffic</li>
</ul>
</li>
<li><strong>Use Proxy-based Load Balancing</strong>:</li>
<li>Integrate Load Balancing with <strong>Cloud Armor</strong>
<ul>
<li>IP-based and geo-based access control</li>
<li>Enforce Layer 7 security policies on hybrid and multi-cloud deployments</li>
<li>Pre-configured WAF rules (OWASP10)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="digital-signatures---cloud-kms">Digital Signatures - Cloud KMS</h3>
<ul>
<li>When do we use digital signatures?
<ul>
<li>Purpose 1: Verification of the integrity of the signed data</li>
<li>Purpose 2: Non-repudiation if the signer claims the signature is not authentic
<ul>
<li>Sender cannot deny sending the message later</li>
</ul>
</li>
</ul>
</li>
<li>Workflow:
<ul>
<li>Sender performs private key operation over the data to create a digital signature</li>
<li>Recipient uses the public key to verify the digital signature
<ul>
<li>If verification is unsuccessful, then the data has been altered</li>
</ul>
</li>
</ul>
</li>
<li>Cloud KMS can be used to create an asymmetric key pair (public and private key pair) that supports digital signing
<ul>
<li>Provides APIs/commands to create digital signatures
<ul>
<li><code>gcloud kms asymmetric-sign</code></li>
</ul>
</li>
</ul>
</li>
<li>Use cases: Validating code builds</li>
</ul>
<h3 id="cloud-armor">Cloud Armor</h3>
<ul>
<li><strong>Cloud Armor</strong>: Protect your apps from denial of service and OWASP Top 10 attacks
<ul>
<li>Protects you from common web attacks (OWASP Top 10) like XSS (cross-site scripting) and SQL injection</li>
<li>Protect applications deployed in Google Cloud, in a hybrid deployment, or in a multi-cloud architecture</li>
<li>Provides <strong>preconfigured security policies</strong> (OWASP Top 10 risks etc)
<ul>
<li>Customize rules as per your needs</li>
</ul>
</li>
<li><strong>Use cases</strong>
<ul>
<li>Enable access for users at specific IP addresses with allow lists</li>
<li>Block access for users at specific IP address with deny lists</li>
<li>Protect applications against OWASP Top 10 risks</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="secret-manager">Secret Manager</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">SecretVersionName</span><span class="w"> </span><span class="n">secretVersionName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SecretVersionName</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">projectId</span><span class="p">,</span><span class="w"> </span><span class="n">secretId</span><span class="p">,</span><span class="w"> </span><span class="n">versionId</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">AccessSecretVersionResponse</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="na">accessSecretVersion</span><span class="p">(</span><span class="n">secretVersionName</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">String</span><span class="w"> </span><span class="n">secretValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="na">getPayload</span><span class="p">().</span><span class="na">getData</span><span class="p">().</span><span class="na">toStringUtf8</span><span class="p">();</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>How do you manage your database passwords, your API keys securely?</li>
<li><strong>Secret Manager</strong> - Store API keys, passwords etc
<ul>
<li>Multiple versions of secrets</li>
<li>Automate rotation</li>
<li>Auditing with Cloud Audit Logs</li>
<li>Encrypted by default</li>
</ul>
</li>
<li>Best Practice: <strong>Do NOT store credentials/passwords in code</strong>
<ul>
<li>Use Secret Manager and access secrets in your application</li>
</ul>
</li>
</ul>
<h3 id="architect-responsibilities-stakeholder-management">Architect Responsibilities: Stakeholder Management</h3>
<ul>
<li><strong>Stakeholder</strong>: &ldquo;a person with an interest or concern in something&rdquo;
<ul>
<li>Different stakeholders have different priorities/interests/degrees of influence:
<ul>
<li>CEO/CTO</li>
<li>Business Process Owner</li>
<li>Product Owner</li>
<li>Architecture Team</li>
<li>Scrum Master</li>
<li>Development Team</li>
<li>Test Team</li>
</ul>
</li>
</ul>
</li>
<li>As an architect, you need to <strong>understand the needs of different stakeholders and design solutions</strong> that meet them
<ul>
<li>Key to stakeholder management:<strong>Early clear communication</strong>
<ul>
<li>Identify stakeholders, their interests, and build a plan to effectively communicate with them</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="architect-responsibilities-change-management">Architect Responsibilities: Change Management</h3>
<ul>
<li>Changes are inevitable
<ul>
<li>People, process, and technology (systems, hardware, and software)</li>
<li>But humans hate change</li>
</ul>
</li>
<li>Change Management: How do you deal with changes and reduce impact?
<ul>
<li>Understand the change:
<ul>
<li>Reason</li>
<li>Risks</li>
<li>Resouces</li>
<li>Responsibility: Who can make it happen?</li>
</ul>
</li>
<li>Follow the cycle: Plan - Do - Check - Action</li>
</ul>
</li>
</ul>
<h3 id="architect-responsibilities-business-continuity-planning">Architect Responsibilities: Business Continuity Planning</h3>
<ul>
<li>BCP: How to keep business running in face of disasters?</li>
<li><strong>Disaster Recovery</strong>: Parts of BCP focused IT operations
<ul>
<li>Example: use cloud/on-prem as DR environment</li>
<li>Example: have a backup network connection between cloud and on-prem</li>
<li>Disaster Recovery Plan: How should an enterprise respond to different types of disasters?
<ul>
<li>Includes people, process and technology (systems, hardware, and software)</li>
<li>Identifies critical services, personnel and plans</li>
<li>Define recovery time objective (RTO) and Recovery Point Objective (PRO)
<ul>
<li>Design and Architect your solutions to meet your RTO and RPO objectives</li>
</ul>
</li>
<li>DR plans should be <strong>continously tested</strong> (Game days)
<ul>
<li>Are you able to restore a database from archive?</li>
</ul>
</li>
</ul>
</li>
<li><strong>BCP = Disaster Recovery Plan</strong> (Restore critical IT applications and systems) + <strong>Business recovery</strong> (Restore critical business processes)</li>
</ul>
</li>
</ul>
<h3 id="architect-responsibilities-incident-management">Architect Responsibilities: Incident Management</h3>
<ul>
<li><strong>Incident</strong>: &ldquo;unplanned event that causes a service disruption&rdquo;</li>
<li><strong>Goal</strong>: &ldquo;How to avoid incidents?&rdquo; and &ldquo;How to react to incidents quickly?&rdquo;</li>
<li><strong>How to avoid incidents?</strong>
<ul>
<li>Monitoring and Alerting
<ul>
<li>Examples: Alerts: free disk space in Storage/Databases, CPU utilization, Size of message queue</li>
</ul>
</li>
<li>Programming best practices
<ul>
<li>Retry with exponential backoff</li>
</ul>
</li>
</ul>
</li>
<li><strong>How to react to incidents quickly?</strong>
<ul>
<li>Monitoring (logging, tracing debugging, metrics, dashboards)</li>
<li>Being prepared (game days)</li>
</ul>
</li>
<li><strong>Post-mortem</strong>
<ul>
<li>Goal: how to prevent a repeat of the incident?
<ul>
<li>Goal is NOT &ldquo;Whom to blame&rdquo;</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="architect-responsibilities-data-management">Architect Responsibilities: Data Management</h3>
<ul>
<li>Managing data and its flow:
<ul>
<li>How does data come in?(stream or batch or transactional application)
<ul>
<li>If you have plans to move from batch to stream, prefer Cloud Dataflow</li>
</ul>
</li>
<li>What rate will we receive data?
<ul>
<li>Plan for scaling storage (prefer auto scaling storage like Cloud Storage)</li>
</ul>
</li>
<li>What kind of data? (archive or &hellip;)</li>
<li>How much data? (GB, TB, PB)</li>
<li>For how long?
<ul>
<li>Cloud Storage Lifecycle Policies and Retention Policies</li>
<li>Table Expiration</li>
</ul>
</li>
<li>Who will have access?</li>
<li>How will you use the data?
<ul>
<li>Ideally keep data and data processing system in the same zone (or atleast the same region)</li>
<li>If you are not planning to use the data for a long time, use Cloud Storage Archive Storage class</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="section-34">Section 34</h1>
<h3 id="cloud-scheduler">Cloud Scheduler</h3>
<ul>
<li>Fully managed, enterprise-grade scheduler
<ul>
<li>Schedule all kinds of jobs</li>
<li>Uses Unix cron format</li>
</ul>
</li>
<li>Integrates with App Engine, Cloud Pub/Sub, Cloud Logging and any HTTP endpoint</li>
<li>Manage all your automation tasks from one place</li>
<li>Provides automated retries</li>
<li>Use cases: Schedule tasks across a fleet of Compute Engine instances
<ul>
<li>Use Cloud Scheduler for scheduling a message on Pub/Sub</li>
<li>Compute Engine instances can process messages from Pub/Sub</li>
</ul>
</li>
<li>(Remember) Needs an App Engine App in the Project
<ul>
<li>Earlier Alternative: App Engine Cron Service</li>
</ul>
</li>
</ul>
<h3 id="cloud-emulators">Cloud Emulators</h3>
<ul>
<li>How do you develop GCP applications in your local machine without connecting to GCP?
<ul>
<li>Setup local development environment with Cloud Emulators</li>
</ul>
</li>
<li>Supports <strong>emulation of</strong>:
+</li>
<li>You can develop your applications locally using emulators!</li>
</ul>
<h3 id="cloud-dns">Cloud DNS</h3>
<ul>
<li>What would be the steps in setting up a website with a domain name (for example, wysiwyz.com)?
<ol>
<li>Buy the domain name in wysiwyz.com (Domain Registrar)</li>
<li>Setup your website content (Website Hosting)</li>
<li>Route requests to wysiwyz.com to my website host server (DNS)</li>
</ol>
</li>
<li>Cloud DNS = Global Domain Name System (step#3)
<ul>
<li>Setup your DNS routing for your website (wysiwyz.com)
<ul>
<li>Route api.wysiwyz.com to the IP address of api server</li>
<li>Route static.wysiwyz.com to the IP address of http server</li>
<li>Route email ( <a href="mailto:oregano@wysiwyz.com" rel="">oregano@wysiwyz.com</a> ) to the mail server (mail.wysiwyz.com)</li>
</ul>
</li>
<li>Public and private managed DNS zones (container for records)</li>
</ul>
</li>
</ul>
<h3 id="cloud-dns---cli">Cloud DNS - CLI</h3>
<ul>
<li><code>gcloud dns managed-zones create ZONE_NAME</code>
<ul>
<li><code>--description</code></li>
<li><code>--dns-name</code></li>
<li><code>--visibility</code> (private / public)</li>
<li><code>--networks</code></li>
</ul>
</li>
<li>Three steps to add records to a managred zone:
<ul>
<li>Start Transaction for Zone</li>
<li>Make Changes
<ul>
<li><code>gcloud dns record-sets transaction add --name</code></li>
</ul>
</li>
<li>End Transaction for Zone</li>
</ul>
</li>
</ul>
<h3 id="pricing-calculator">Pricing Calculator</h3>
<ul>
<li>Estimating the cost of a Google Cloud solution is NOT easy</li>
<li>You would need to take a number of factors into account</li>
<li>How do you estimate the cost of your GCP solution?</li>
</ul>
<h3 id="anthos">Anthos</h3>
<ul>
<li>Run K8S cluster on cloud and on-premises
<ul>
<li>Multi-cluster management: Consistent managed K8S</li>
<li>Consistent development and operations experience</li>
</ul>
</li>
<li>Centralized config management (Git repo)
<ul>
<li>Logically group and normalize clusters as environs
<ul>
<li>Define policies - Kubernetes API, Access control</li>
</ul>
</li>
<li>Deploy to clusters on new commits
<ul>
<li>Use namespaces, labels and annotations to decide which clusters to apply changes on</li>
</ul>
</li>
</ul>
</li>
<li>Provides <strong>Service Mesh</strong> (based on <strong>Istio</strong>)
<ul>
<li><strong>Sidecar</strong> to implement common microservice features
<ul>
<li>Authentication and authorization (service accounts)</li>
<li>Distributed Tracing, Automatic metrics, logs and dashboards</li>
<li>A/B testing, canary rollouts (even trak SLIs and error budgets)</li>
<li>Cloud Logging and Cloud monitoring</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="machine-learning-in-google-cloud">Machine Learning in Google Cloud</h3>
<table>
<thead>
<tr>
<th>Service</th>
<th>Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td>Prebuilt APIs</td>
<td>Needs no in-house ML expertise. Easy to Use.<!-- raw HTML omitted -->Examples: Vision API, Video API, Natural Language API, Speech-to-Text API, Text-to-Speech API, and Translation API</td>
</tr>
<tr>
<td>Cloud AutoML</td>
<td>Build custom ML models with developers having limited ML expertise</td>
</tr>
<tr>
<td>AI Platform</td>
<td>Help data scientists build custom models (based on Tensorflow Enterprise)<!-- raw HTML omitted -->Serverless, scalable training and serving capabilities for custom ML models<!-- raw HTML omitted -->Take ML projects from concept to production quickly<!-- raw HTML omitted -->Explainable AI - interpret models with confidence</td>
</tr>
<tr>
<td>Data management</td>
<td>Cloud Storage and BigQuery<!-- raw HTML omitted -->BigQuery ML - &hellip;</td>
</tr>
<tr>
<td>Automation and instrumentation</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="rest-api-challenges">REST API Challenges</h3>
<ul>
<li>Most applications today are built around REST API:
<ul>
<li>Resources (/todos, /todos/{id}, etc.)</li>
<li>Actions - HTTP methods - GET, PUT, POST, DELETE etc.</li>
</ul>
</li>
<li>Management of REST API is not easy:
<ul>
<li>You&rsquo;ve to take care of authentication and authorization</li>
<li>You&rsquo;ve to be able to set limits (rate limiting, quotas) for your API consumers</li>
<li>You&rsquo;ve to take care of implementing multiple versions of your API</li>
<li>You would want to implement monitoring, caching and a lot of other features&hellip;</li>
</ul>
</li>
</ul>
<h3 id="apigee-api-management">Apigee API Management</h3>
<ul>
<li>Design, secure, publish, analyze, monitor, monetize and scale APIs anywhere
<ul>
<li>On-premises, Google Cloud, or Hybrid</li>
</ul>
</li>
<li>Manage <strong>Complete API life cycle</strong></li>
<li>Provides AI-powered API monitoring (Get actionable insights)</li>
<li>Enable Caching with Cloud CDN</li>
<li>Create <strong>Developer Portals</strong>:
<ul>
<li>Allow developers to easily explore the APIs, get API keys etc.
<ul>
<li>e.g. Apigee integrated portal</li>
</ul>
</li>
</ul>
</li>
<li>Use Case: Abstraction layer on top of legacy services</li>
<li>Use Case: Expose your assets (ML Models) as APIs</li>
</ul>
<h3 id="getting-started-with-identity-platform">Getting Started with Identity Platform</h3>
<ul>
<li>Identity Platform: Customer identity and access management</li>
<li>What&rsquo;s the difference: Cloud IAM vs Identity Platform
<ul>
<li>Cloud IAM: Employees and Partners Authorization
<ul>
<li>Control access to Google Cloud Resouces</li>
<li>Member, Roles, Policy, Service Accounts</li>
</ul>
</li>
<li>Identity Platform: Customer identity and access management (CIAM)
<ul>
<li>Authentication and Authorization for your applications and services</li>
</ul>
</li>
</ul>
</li>
<li>Identity Platform: Key Features
<ul>
<li>Authentication and authorization for web and mobile apps (iOS, Android, &hellip;)</li>
<li>Multiple authentication methods
+</li>
<li>Features: User sign-up and sign-in, MFA etc</li>
<li>An upgrade from Firebase Authentication Legacy</li>
<li>Integrates well with Identity-Aware Proxy</li>
</ul>
</li>
</ul>
<h3 id="cloud-iam-vs-identity-platform---scenarios">Cloud IAM vs Identity Platform - Scenarios</h3>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td>An Application on a GCE VM needs access to cloud storage</td>
<td>Cloud IAM - Service Account</td>
</tr>
<tr>
<td>An enterprise user need access to upload objects to a Cloud Storage bucket</td>
<td>Cloud IAM</td>
</tr>
<tr>
<td>I want to manage end users for my application</td>
<td>Identity Platform</td>
</tr>
<tr>
<td>I want to enable &ldquo;Login using Facebook/twitter&rdquo; for my application</td>
<td>Identity Platform</td>
</tr>
<tr>
<td>I want to create user sign-up and sign-in workflows for my application</td>
<td>Identity Platform</td>
</tr>
</tbody>
</table>
<h3 id="getting-started-with-event-driven-architecture">Getting Started with Event Driven Architecture</h3>
<ul>
<li>Microservices calling each other =&gt; Tight Coupling</li>
<li>Event driven architectures: Microservices reacting to changes in state (events)
<ul>
<li>Example:
<ul>
<li>1: Order Service publishes an OrderReceived event</li>
<li>2: Billing Service receives it and publishes an OrderBilled event</li>
<li>3: Warehouse Service receives it and publishes an OrderReadyToShip event</li>
<li>4: Shipping Service receives it and publishes and OrderShipped event</li>
<li>5: Email Service receives it and sends an email to the user</li>
</ul>
</li>
<li>Advantages:
<ul>
<li>Loose Coupling: Microservices do not know about each other</li>
<li>Flexible Orchestration: Same event can be processed by multiple services</li>
<li>Resiliency: Events can be easily retried in case of failures</li>
<li>Asynchronous: A microservice does not need to wait for the consumer to process the event</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="getting-started-with-cloudevents">Getting Started with CloudEvents</h3>
<ul>
<li>CloudEvents: Standard specification to describe events
<ul>
<li>Reference:</li>
<li>Challenge: different publishers use different formats for events</li>
<li>Goal: Describe event data in a standard way
<ul>
<li>A project under CNCF - Cloud Native Computing Foundation</li>
</ul>
</li>
<li>Advantages:
+
+</li>
</ul>
</li>
</ul>
<h4 id="getting-started-with-eventarc">Getting Started with Eventarc</h4>
<ul>
<li>Eventarc: Simplifies event driven architectures in Google Cloud
<ul>
<li>Adheres to the CloudEvents (cloudevents.io) specification</li>
<li>Event provider: Who can trigger events?
<ul>
<li>Direct: &hellip;</li>
<li>In-Direct: From Cloud Audit Logs Entries
<ul>
<li>Huge variety of Google Cloud services. Example: GCE, GAE, Artifact Registry &hellip;</li>
</ul>
</li>
</ul>
</li>
<li>Event destination: Who can process events?
<ul>
<li>Cloud Functions (2nd gen), Cloud Run and GKE services</li>
</ul>
</li>
<li>(BACKGROUND) Uses Pub/Sub topics</li>
</ul>
</li>
</ul>
<h3 id="getting-started-with-observability-and-opentelemetry">Getting Started with Observability and OpenTelemetry</h3>
<ul>
<li><strong>Observability</strong>: &ldquo;measure the internal state of a system by examining its outputs&rdquo;
<ul>
<li><strong>Goal</strong>: Proactively identify problems and fix them</li>
<li>THREE PILLARS of observability: logs, metrics and traces
<ul>
<li>Earlier we ahd different standards for logs, metrics and traces</li>
<li>We also have very different approaches across languages</li>
</ul>
</li>
<li>How about <strong>ONE STANDARD ACROSS PLATFORMS</strong>?
<ul>
<li>OpenTelemetry:  &hellip;
<ul>
<li>Open standard</li>
<li>A CNCF - Cloud Native Computing Foundation - Project (K8S is another CNCF project)</li>
<li>Almost every cloud platform supports OpenTelemetry</li>
<li>Steps to use OpenTelemetry</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="using-service-directory">Using Service Directory</h3>
<ul>
<li>Service Discovery - Help microservices find one another</li>
<li>Service Directory - A single place to publish, discover and connect services</li>
<li>Your worklaods can be running in:
<ul>
<li>Google Cloud</li>
<li>d</li>
<li>d</li>
</ul>
</li>
</ul>
<h3 id="using-service-directory---features">Using Service Directory - Features</h3>
<ul>
<li>Managed Service (highly available and scalable)</li>
<li>Register/resolve services using DNS, HTTP, and gRPC</li>
<li>Service Directory client libraries are available for multiple languages (along with REST/RPC APIs)
<ul>
<li>You can use these libraries to register/resolve service location</li>
</ul>
</li>
<li>Audit logging (&ldquo;Who did what, where and when?&rdquo; - Cloud Logging)</li>
<li>Request/response logs(Cloud Logging)</li>
</ul>
<h1 id="section-35">Section 35</h1>
<h3 id="google-cloud-architecture-framework">Google Cloud Architecture Framework</h3>
<ul>
<li>Best praces and implementation recommendations to help you design your Google Cloud deployment</li>
<li>First Step:</li>
<li>4</li>
</ul>
<h3 id="principle-1-operational-excellence">Principle 1: Operational Excellence</h3>
<ul>
<li>&ldquo;Efficiently running, managing and monitoring systems that deliver business value&rdquo;</li>
<li>Strategies:
+</li>
</ul>
<h3 id="operational-excellence---best-practices">Operational Excellence - Best practices</h3>
<ul>
<li>Increase software development and release velocity
<ul>
<li>Release Engineering
<ul>
<li>Frequent small releases</li>
</ul>
</li>
<li>Automation
+</li>
<li>Services:
+</li>
</ul>
</li>
</ul>
<h3 id="operational-excellence---best-practices---2">Operational Excellence - Best practices - 2</h3>
<ul>
<li>Monitor system health and business health
<ul>
<li>Understand four golden signals
<ul>
<li>Latency</li>
<li>Traffic</li>
<li>Errors</li>
<li>Saturation</li>
</ul>
</li>
<li>Logging: Use Cloud Logging and export to Cloud Storage, BigQuery and Pub/Sub depending on your needs</li>
<li>Metrics: Define and capture metrics SLIs, SLOs etc</li>
<li>Monitoring: Cloud Monitoring can aggregate metrics, logs, and events
<ul>
<li>Define alerts and custom metrics to identify problems and resolve them quickly</li>
<li>You can create visual dashboards as well</li>
<li>Generate actionable alerts</li>
</ul>
</li>
<li>Key Services: Cloud Monitoring, Cloud Logging, Cloud Debugger, Error Reporting, Cloud Trace and Cloud Profiler</li>
</ul>
</li>
</ul>
<h3 id="operational-excellence---best-practices---3">Operational Excellence - Best practices - 3</h3>
<ul>
<li>Design for disaster recovery
<ul>
<li>Create well-defined disaster recovery (DR) plan
<ul>
<li>Define Recovery time objective (RTO) and recovery point objective (RPO)</li>
<li>Consider everything in your DR plan: Applications (comput etc), Data (databases etc), Network infrastructure, Bandwidth, Facilities</li>
<li>Use features provided by Google Cloud:
<ul>
<li>Use Global network to build Redundancy</li>
<li>Managed services make Scalability easy</li>
</ul>
</li>
</ul>
</li>
<li>Regularly test your DR plan</li>
<li>Example features you can make use of:
<ul>
<li>Schedule Persistent Disk snapshots for your VMs and copy them across regions</li>
<li>Enable Live Migration to keep your VMs running even when there is software or hardware maintenance</li>
<li>Use Cloud DNS to switch from primary to backup</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="principle-2-security-privacy-and-compliance">Principle 2: Security, Privacy and Compliance</h3>
<ul>
<li>Plan your security controls, privacy, and meet your compliance needs</li>
<li>Strategies
<ul>
<li>Implement least privilege with identity</li>
</ul>
</li>
</ul>
<h3 id="security-privacy-and-compliance---best-practices">Security, Privacy and Compliance - Best practices</h3>
<ul>
<li>Manage Authentication and Authorization
<ul>
<li>Follow Identity and Access Management (IAM) Best Practices
<ul>
<li>Grant appropriate roles</li>
<li>Understand when to use service accounts
<ul>
<li>Treat each app component as a separate trust boundary
<ul>
<li>Create separate service account for each component/service with the minimum permissions needed</li>
</ul>
</li>
</ul>
</li>
<li>Use Organization Policy Service (what is allowed in your organization?)</li>
<li>Use Cloud Asset Inventory (Track your inventory)</li>
<li>Use Cloud Audit Logs to audit IAM policy changes and service accounts</li>
</ul>
</li>
</ul>
</li>
<li>Implement Compute Security Controls
<ul>
<li>Use Private IPs as much as possible</li>
<li>Create hardened VM images (OS + minimum software)</li>
<li>Use Shielded VMs to prevent remote attacks, privilege escalation, and malicious insiders</li>
<li>Enable node auto-upgrades for GKE clusters</li>
<li>Use GKE Sandbox</li>
</ul>
</li>
</ul>
<h3 id="security-privacy-and-compliance---best-practices---2">Security, Privacy and Compliance - Best practices - 2</h3>
<ul>
<li>Secure the network
<ul>
<li>Use a carefully designed custom VPC (DO NOT use the default VPC)</li>
<li>Isolates workloads into individual projects by creating one VPC per project</li>
<li>Control ingress and egress network traffic using firewall rules</li>
<li>Run advance security and traffic inspection tools</li>
<li>Use Security Command Center to analyze the security of your infrastrature</li>
<li></li>
</ul>
</li>
</ul>
<h3 id="security-privacy-and-compliance---best-practices---3">Security, Privacy and Compliance - Best practices - 3</h3>
<ul>
<li>Implement data security controls
<ul>
<li>(Default)</li>
<li>Use Object Versioning in Cloud Storage for sensitive data</li>
<li>Implement data security</li>
</ul>
</li>
<li>Audit your infrastructure with audit logs
<ul>
<li>Use Cloud Audit Logs</li>
<li>Enable Access</li>
</ul>
</li>
</ul>
<h3 id="principle-3-reliability">Principle 3: Reliability</h3>
<ul>
<li>Most important feature of any application/service:
<ul>
<li>Keys:
<ul>
<li>Measurable reliability goals</li>
<li>Architect for scalability, high availability, and automated change management</li>
<li>Self-healing and observability are important</li>
<li>Quick recovery from failures using automations as much as possible</li>
</ul>
</li>
<li>Strategies:
<ul>
<li>Define KPIs, SLOs and SLIs</li>
<li>Create redundancy (Prefer horizontal scalability)</li>
<li>Make incremental changes
<ul>
<li>include rollback capability</li>
</ul>
</li>
<li>Instrument systems for observability</li>
<li>Automate detection of failure</li>
<li>Document and automate emergency responses</li>
<li>Test failure recovery</li>
<li>Reduce toil (Eliminate manual work)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="reliability---best-practices">Reliability - Best practices</h3>
<ul>
<li><strong>Define reliability goals</strong>: Service Level Objectives and Error Budgets
<ul>
<li>Clearly define SLls, SLOs, SLAs and Error budgets</li>
</ul>
</li>
<li><strong>Build observability</strong> into your infrastructure and applications
<ul>
<li>Monitoring, logging, tracing, profiling, debugging etc.</li>
</ul>
</li>
<li><strong>Design for scale and high availability</strong>
<ul>
<li>Design a multi-region architecture with failover</li>
<li>Eliminate scalability bottlenecks
<ul>
<li>Prefer horizontal scalability</li>
</ul>
</li>
<li>Degrade service levels gracefully
<ul>
<li>Static web pages when dynamic web site is down</li>
<li>Temporarily disabling data updates</li>
</ul>
</li>
<li>Implement exponential backoff with jitter
<ul>
<li>Exponentially increasing wait time before retry</li>
</ul>
</li>
<li>Predict peak traffic events and plan for them</li>
</ul>
</li>
</ul>
<h3 id="reliability---best-practice---2">Reliability - Best practice - 2</h3>
<ul>
<li>Build flexible and automated deployment capabilities
<ul>
<li>Ensure that every change can be rolled back</li>
<li>Spread out traffic for time promotions and launches</li>
<li>Implement progressive rollouts with canary testing</li>
<li>Automate build, test and deploy</li>
</ul>
</li>
<li>Build efficient alerting</li>
<li>Build a collaborative process for incident management
<ul>
<li>Reduce Mean Time to Detect (MTTD): Alert teams at the right time</li>
<li>Reduce Mean Time to Mitigate (MTTM) and Mean Time to Recovery (MTTR): Properly documented and well-exercised incident management plan</li>
<li>Increase Mean Time Between Failures (MTBF): Build reliable systems</li>
<li>Blameless postmortem culture</li>
</ul>
</li>
</ul>
<h4 id="principle-4-performance-and-cost-optimization">Principle 4: Performance and Cost Optimization</h4>
<ul>
<li>Strategies
<ul>
<li>Evaluate performance requirements</li>
<li>Use scalable design patterns</li>
<li>f</li>
</ul>
</li>
<li>Use autoscaling and data processing
<ul>
<li>Autoscale Compute Engine VMs with Managed instance groups (MIGs) - Uses an instance template</li>
<li>Enable Cluster autoscaler and Pod</li>
<li></li>
</ul>
</li>
</ul>
<h3 id="performance-and-cost-optimization---best-practices---2">Performance and Cost Optimization - Best practices - 2</h3>
<ul>
<li>Identify apps to tune
<ul>
<li>Use Cloud Trace, Cloud Debugger and Cloud Profiler to gain insights into your apps</li>
<li>Instrument apps to identify inter-service</li>
</ul>
</li>
<li>Analyze your costs and optimize
+</li>
</ul>
<h1 id="section-36">Section 36</h1>
<h3 id="case-studies---important">Case Studies - <em>Important</em></h3>
<h3 id="1-ehr-healthcare">1. EHR Healthcare</h3>
<ul>
<li>Provides SaaS based electronic health record software for multi-national medical offices, hospitals and insurance providers (Exponential growth):</li>
<li>Current Architecture
<ul>
<li>Multiple colocation facilities with similar but separate environments (lease on one data center is about to expire)
<ul>
<li>Web-based customer-facing applications running on Kubernetes clusters
<ul>
<li>Requirement: Consistent way to manage apps that are container-based</li>
<li>Requirement: Maintain and manage multiple container-based environments</li>
</ul>
</li>
<li>Databases: MySQL, MS SQL Server, Redis and MongoDB</li>
<li>Legacy file- and API-based integrations with insurance providers
<ul>
<li>Scheduled for replacement over next few years - Will NOT be moved to Google Cloud</li>
<li>Requirement: Main legacy interfaces to insurance provides (connectivity to on-premises and cloud)</li>
</ul>
</li>
<li>Users are managed via Microsoft Active Directory</li>
<li>Monitoring with various open source tools</li>
<li>Alert by email (generally ignored)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="requirements">Requirements</h3>
<ul>
<li>Google Cloud will replace their current colocation facilities</li>
<li>Scalable, resilient platform spanning multiple environments seamlessly</li>
<li>Facing outages with mis-configured systems, inadequate capacity to manage spikes and inconsistent monitoring practices</li>
<li>Other Requirements:
<ul>
<li>Dynamically scale and provision environments, adapt DRP, continuous deployment</li>
<li>Centralized visibility and proactive action on system performance and usage</li>
<li>On-board new insurance providers quickly</li>
<li>Insights and predictions</li>
<li>Secure and high-performance connection between on-premises system</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>service</th>
<th>discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td>Anthos</td>
<td></td>
</tr>
<tr>
<td>Cloud Logging, Cloud Monitoring</td>
<td>Alerting Policies for Notifications</td>
</tr>
<tr>
<td>Cloud Logging &gt; (Cloud Storage, BigQuery)</td>
<td>Log Retention</td>
</tr>
<tr>
<td>BigQuery</td>
<td>Make predictions and generate</td>
</tr>
<tr>
<td>Cloud Dedicated Interconnect</td>
<td>Secure and high-performance connection</td>
</tr>
<tr>
<td>Cloud CDN</td>
<td>Reduced latency</td>
</tr>
<tr>
<td>Active Directory Federation Services (AD FS)</td>
<td>For single sign-on<!-- raw HTML omitted -->Google Cloud Directory Sync (synchronize user and groups) &hellip;</td>
</tr>
<tr>
<td>Databases</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="2-helicopter-racing">2. Helicopter Racing</h3>
<ul>
<li>Global sports league for competitive helicopter racing</li>
<li>Current Architecture:
<ul>
<li>Existing public cloud provider (public cloud-first company) hosts:
<ul>
<li>Core of mission-critical apps</li>
<li>Existing content is stored in an object storage service</li>
<li>Race predictions are performed using TensorFlow running on VMs
<ul>
<li>Allows predicting race outcomes but lacks the facility to:
<ul>
<li>Support real-time predictions during races (REQUIREMENT)</li>
<li>Capacity to process season-long results (REQUIREMENT)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Video recording and editing is performed at the race tracks:
<ul>
<li>Content is encoded and transcoded in the cloud (using VMs created for each job)</li>
</ul>
</li>
<li>Enterprise-grade connectivity and local compute provided by truck-mounted mobile data centers</li>
</ul>
</li>
</ul>
<h3 id="requirements-1">Requirements</h3>
<ul>
<li>Migrate existing service to a new platform
<ul>
<li>Expand use of managed AI and ML services to facilitate race predictions:
<ul>
<li>Increase predictive capabilities during and before races:
<ul>
<li>Race results, Mechanical failures, Crowd sentiment</li>
<li>Enhanced video streams that include predictions of events within the race (e.g. overtaking)</li>
<li>Maintain or increase prediction throughout and accuracy</li>
</ul>
</li>
<li>Expose the predictive models to partners</li>
<li>Create real-time analytics of viewer consumption patterns and engagement
<ul>
<li>Increase telmetry and create additional insights</li>
<li>Measure fan engagement with new predictions</li>
</ul>
</li>
</ul>
</li>
<li>Move the serving of real-time and recorded content closer to their users:
<ul>
<li>Reduce latency, enhance global availability and quality of the broadcasts</li>
<li>Increase the number of concurrent viewers</li>
</ul>
</li>
</ul>
</li>
<li><strong>Create a data mart</strong> to enable processing of large volumes of race data</li>
<li>Increase transcoding performance</li>
<li>Create a merchandising revenue stream</li>
</ul>
<h3 id="discussion">Discussion</h3>
<table>
<thead>
<tr>
<th>service</th>
<th>discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td>BigQuery + AI Platform</td>
<td>Migrate existing service to a new platform (Managed AI and ML service using TensorFlow)</td>
</tr>
<tr>
<td>Cloud Storage, Cloud CDN</td>
<td>Move the serving of real-time and recorded content closer to their users</td>
</tr>
<tr>
<td>Apigee</td>
<td>Expose the predictive models to partners<!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Cloud Pub/Sub</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>Video Intelligence API<!-- raw HTML omitted -->Streaming API</td>
<td>Real-time streaming analysis for live media<!-- raw HTML omitted -->AIStreamer ingestion library allows you to connect to API<!-- raw HTML omitted -->Supports File Streaming, HTTP Live Streaming (HLS), Real Time Streaming Protocol (RTSP), Real Time Messaging Protocol (RTMP)</td>
</tr>
<tr>
<td>References</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="3-mountkirk-games">3. Mountkirk Games</h3>
<ul>
<li>Online, session-based, multi-player games for mobile platforms
<ul>
<li>Longterm Requirement: Support multiple games platforms (expand beyond mobile)</li>
</ul>
</li>
<li>Current Architecture:</li>
</ul>
<h3 id="requirements-2">Requirements</h3>
<ul>
<li>Working on <strong>retro-style first-person shooter (FPS)</strong> game
<ul>
<li>Hundreds of simultaneous players joining a geo-specific digital arena from multiple platforms and locations</li>
<li><strong>Proposed</strong>: Run game backend on Google Kubernetes Engine (Rapid Scaling)
<ul>
<li>Google&rsquo;s global load balancer to route to closest regional game arenas</li>
<li>Support eventual migration of legacy games to this new platform</li>
<li>Requirement: Real-time global leaderboard of top players across every active arena
<ul>
<li>Proposed: Use multi-region Spanner cluster for near real-time global leader board</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>Other Requirements</strong>:
<ul>
<li>Store game activity logs in structured files for future analysis</li>
<li>Use GPU processing to render graphics server-side for multi-platform support</li>
<li>Enable advanced analytics capabilities</li>
<li>Use cloud-native design principles
<ul>
<li>Multiple regions, Rapid interation, Minimize latency and costs, Auto scaling</li>
<li>Managed services and Pooled resources</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="discussion-1">Discussion</h3>
<table>
<thead>
<tr>
<th>service</th>
<th>discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td>Game Servers (Agones + Kubernetes)</td>
<td>Deliver seamless multiplayer gaming experiences</td>
</tr>
<tr>
<td>MIGs + VMs + Global Load Balancing + GPUs</td>
<td>If you need a lot of customization</td>
</tr>
<tr>
<td>Cloud Storage</td>
<td>Store game activity logs in structured files for future analysis</td>
</tr>
<tr>
<td>Cloud Spanner</td>
<td>Proposed real-time global leader board<!-- raw HTML omitted -->*prefer Memorystore - Redis</td>
</tr>
<tr>
<td>Batch - Cloud Storage &gt; Dataflow &gt; BigQuery Streaming - Pub/Sub &gt; Dataflow &gt; BigQuery</td>
<td>Enable advanced analytics capabilities<!-- raw HTML omitted -->Explore Looker for advanced insights</td>
</tr>
<tr>
<td>Cloud Build, Spinnaker and/or Jenkins</td>
<td></td>
</tr>
<tr>
<td>Cloud Spanner + Memorystore</td>
<td></td>
</tr>
<tr>
<td>Cloud Bigtable</td>
<td></td>
</tr>
<tr>
<td>Cloud Firestore</td>
<td>Player database</td>
</tr>
<tr>
<td>Cloud BigQuery, AI Platform</td>
<td></td>
</tr>
<tr>
<td>Refereences</td>
<td><a href="https://www.youtube.com/watch?v=dAKAWprvbso" target="_blank" rel="noopener noreffer ">https://www.youtube.com/watch?v=dAKAWprvbso</a><!-- raw HTML omitted --><a href="https://www.youtube.com/watch?v=OF8EtzQ4e6c" target="_blank" rel="noopener noreffer ">https://www.youtube.com/watch?v=OF8EtzQ4e6c</a><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h4 id="4-terramearth">4. TerramEarth</h4>
<ul>
<li><strong>Manufactures heavy equipment</strong> for the mining and agricultural industries
<ul>
<li>Mission: Build products that make their customers more productive</li>
<li>500 dealers and service centers in 100 countries (Global audience)</li>
<li>2 million TerramEarth vehicles with 20% growth year on year
<ul>
<li>Sensors capture telemetry data</li>
<li>Subset of critical data transmitted in real time
<ul>
<li>Rest of data collected, compressed, and uploaded daily when the vehicles return to home base</li>
<li>200 to 500 MB of data per vehicle per day</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>Current Architecture</strong>
<ul>
<li>Google Cloud
<ul>
<li>Data aggregation and analysis infrastructure</li>
<li>Web frontend for dealers and customers (stock management and analytics)</li>
</ul>
</li>
<li>Private data centers
<ul>
<li>Legacy inventory and logistics management systems</li>
<li>Two main manufacturing plants send sensor data to private data centers</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="requirements-3">Requirements</h3>
<ul>
<li>Requirements:
<ul>
<li>Current:
<ul>
<li>Provide best-in-class online fleet management services to customers
<ul>
<li>Improve operations of dealerships</li>
<li>Minimize vehicle downtimes (Detect failures and rapidly ship parts to dealerships for just-in-time repair)</li>
</ul>
</li>
<li>Autoscaling, DevOps and SRE Elements
<ul>
<li>Improve and standardize tools for app and network monitoring, troubleshooting</li>
<li>Modernize CI/CD pipelines for container-based workloads</li>
<li>Allow remote developers to be productive</li>
</ul>
</li>
<li>Flexible and scalable platform for develoopers to create custom APIs for dealers and partners
<ul>
<li>Create a new abstraction layer for HTTP API access to legacy systems (Enable gradual move to cloud)</li>
<li>Self-service portal for internal and partner developers to create new projects, request resources for data analytic jobs and centrally manage access to the API endpoints</li>
</ul>
</li>
<li>Use cloud-native solutions for keys and secrets management</li>
</ul>
</li>
<li>5-year strategic plan
<ul>
<li>Create a partner ecosystem of new products by enabling access to our data</li>
<li>Increase autonomous operation capabilities of vehicles</li>
<li>Path to move legacy systems to the cloud</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="discussion-2">Discussion</h3>
<table>
<thead>
<tr>
<th>Service</th>
<th>Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td>IOT Core &gt; Pub Sub &gt; Dataflow &gt; BigQuery &gt; (AI platform, AutoML, BigQuery ML)</td>
<td></td>
</tr>
<tr>
<td>Cloud Storage &gt; Dataflow &gt; BigQuery</td>
<td>Batch Process</td>
</tr>
<tr>
<td>Apigee</td>
<td>Flexible and scalable platform for developers to creat custom APIs <!-- raw HTML omitted -->Create a new abstraction layer for HTTP API access to legacy systems (Enable gradual move to cloud)<!-- raw HTML omitted -->Self-service protal for internal</td>
</tr>
<tr>
<td>Cloud Build, Spinnaker, Jenkins</td>
<td></td>
</tr>
<tr>
<td>Google Workspace, Virtual destops through partners<!-- raw HTML omitted --></td>
<td></td>
</tr>
<tr>
<td>Secret Manager</td>
<td></td>
</tr>
<tr>
<td>VPC Flowlogs, Cloud Monitoring, Cloud Logging etc&hellip;</td>
<td></td>
</tr>
<tr>
<td>Kubernetes - GKE</td>
<td>Container based workloads - scalable</td>
</tr>
<tr>
<td>Dedicated Interconnect</td>
<td>Networking</td>
</tr>
</tbody>
</table>
<h1 id="section-37">Section 37</h1>
<h3 id="gca-resources">GCA Resources</h3>
<table>
<thead>
<tr>
<th>Title</th>
<th>Link</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cloud Architecture Center</td>
<td><a href="https://cloud.google.com/architecture/" target="_blank" rel="noopener noreffer ">https://cloud.google.com/architecture/</a></td>
</tr>
<tr>
<td>Google Cloud Solutions</td>
<td><a href="https://cloud.google.com/solutions/" target="_blank" rel="noopener noreffer ">https://cloud.google.com/solutions/</a></td>
</tr>
<tr>
<td>Best Practices for Enterprise Applications</td>
<td><a href="https://cloud.google.com/architecture/framework" target="_blank" rel="noopener noreffer ">https://cloud.google.com/architecture/framework</a></td>
</tr>
<tr>
<td>Building Scalable and Resilient Web Applications on Google</td>
<td><a href="https://cloud.google.com/architecture/scalable-and-resilient-apps" target="_blank" rel="noopener noreffer ">https://cloud.google.com/architecture/scalable-and-resilient-apps</a></td>
</tr>
<tr>
<td>Disaster recovery planning guide</td>
<td><a href="https://cloud.google.com/architecture/dr-scenarios-planning-guide" target="_blank" rel="noopener noreffer ">https://cloud.google.com/architecture/dr-scenarios-planning-guide</a></td>
</tr>
<tr>
<td>Home</td>
<td><a href="https://cloud.google.com/learn/certification/cloud-architect" target="_blank" rel="noopener noreffer ">https://cloud.google.com/learn/certification/cloud-architect</a></td>
</tr>
<tr>
<td>Exam Guide<!-- raw HTML omitted -->Case Studies</td>
<td><a href="https://cloud.google.com/learn/certification/guides/professional-cloud-architect" target="_blank" rel="noopener noreffer ">https://cloud.google.com/learn/certification/guides/professional-cloud-architect</a></td>
</tr>
<tr>
<td>Sample Questions</td>
<td><a href="https://docs.google.com/forms/d/e/1FAIpQLSf54f7FbtSJcXUY6-DUHfBG31jZ3pujgb8-a5io_9biJsNpqg/viewform" target="_blank" rel="noopener noreffer ">https://docs.google.com/forms/d/e/1FAIpQLSf54f7FbtSJcXUY6-DUHfBG31jZ3pujgb8-a5io_9biJsNpqg/viewform</a></td>
</tr>
</tbody>
</table>
<h3 id="certification-exam">Certification Exam</h3>
<ul>
<li>50 questions, two hours</li>
<li>Questions:
<ol>
<li>multiple choice: 4 options, 1 right answer</li>
<li>multiple select: 5 options, 2 right ansers</li>
</ol>
</li>
<li>Result immediately shown after exam completion
<ul>
<li>email (2~5 work days)</li>
</ul>
</li>
<li>Tips &amp; suggestions:
<ol>
<li>Read the entire question
<ul>
<li>identify and write down the key parts of the question</li>
<li>Focus on the constraint in the question
<ul>
<li>e.g. Most cost-effective way - Prefer region to multi-regional if it satisfies all requirements</li>
</ul>
</li>
</ul>
</li>
<li><strong>Answer by Elimination</strong>!</li>
<li>Flag question for future consideration (Review before final submission)</li>
</ol>
</li>
</ul>
<hr>
<h3 id="google-cloud-api">Google Cloud API</h3>
<h4 id="api-management-tools">API management tools</h4>
<ol>
<li>Cloud Endpoints
<ul>
<li>Distributed API management system</li>
<li>Provides an API console, hosting, logging, monitoring, and other features</li>
<li>Use with any APIs that support the OpenAPI Specification</li>
<li>Supports applications running in App Engine, Google Kubernetes Engine, and Compute Engine</li>
<li>Clients include Android, iOS, and Javascript</li>
</ul>
</li>
<li>API Gateway
<ul>
<li>Backend implementations can vary for a single service provider</li>
<li>Provide secure access to your backend servics through a well-defined REST API</li>
<li>Clients consume your REST APIS to implement standalone apps</li>
</ul>
</li>
<li>Apigee API Management
<ul>
<li>Specific focus on business problems, like rate limiting, quotas, and analytics</li>
<li>Many Apigee API Management users provide a software service to other companies</li>
<li>Backend services for Apigee API Management don&rsquo;t need to be in Google Cloud</li>
</ul>
</li>
</ol>
<h4 id="cloud-run">Cloud Run</h4>
<ol start="4">
<li>Cloud Run
<ul>
<li>A managed compute platform that can run stateless containers</li>
<li>Serverless, removing the need for infrastructure management</li>
<li>Built on Knative, an open API and runtime environment built on Kubernetes</li>
<li>Can automatically scale up and down from zero almost instantaneously, charging only for the resources used</li>
</ul>
</li>
</ol>
<p>‚Äã</p>
<iframe class="LikeCoin" height="235" src="https://button.like.co/in/embed/wysiwyz/button?referrer=http%3a%2f%2fwysiwyz.github.io%2fposts%2fgcp_pca_course_notes%2f" width="100%" frameborder=0></iframe><div class="disqus markdown">
                
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'blog-wysiwyz';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
        </div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-03-24</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://wysiwyz.github.io/posts/gcp_pca_course_notes/" data-hashtag="google_cloud"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="http://wysiwyz.github.io/posts/gcp_pca_course_notes/" data-title="Cloud architect GCP üöß"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/google_cloud/">Google_cloud</a>,&nbsp;<a href="/tags/ca/">CA</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/lesson_03_linux/" class="prev" rel="prev" title="Lesson 03: Linux Á≠ÜË®ò - Á£ÅÁ¢üÂä†ÂØÜ„ÄÅApache, Nginx, SSL"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Lesson 03: Linux Á≠ÜË®ò - Á£ÅÁ¢üÂä†ÂØÜ„ÄÅApache, Nginx, SSL</a>
            <a href="/posts/suzume_no_tojimari/" class="next" rel="next" title="„Åô„Åö„ÇÅ„ÅÆÊà∏Á∑†(toji)„Åæ„Çä- ÊàëÂá∫ÈñÄ‰∫ÜÔºåÊàëÂõû‰æÜ‰∫Ü ">„Åô„Åö„ÇÅ„ÅÆÊà∏Á∑†(toji)„Åæ„Çä- ÊàëÂá∫ÈñÄ‰∫ÜÔºåÊàëÂõû‰æÜ‰∫Ü <i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">strict with yourself; lenient with others.</div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><script type="text/javascript" src="https://.disqus.com/embed.js" defer></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/valine@1.5.0/dist/Valine.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{"valine":{"appId":"","appKey":"","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"en","pageSize":10,"placeholder":"Your comment ...","recordIP":true,"visitor":true}},"twemoji":true};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-CCS3QPVY5N', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-CCS3QPVY5N" async></script></body>
</html>
